//* Copyright (c) 2009 Nokia Corporation and/or its subsidiary(-ies).
//* All rights reserved.
//* This component and the accompanying materials are made available
//* under the terms of the License "Eclipse Public License v1.0"
//* which accompanies this distribution, and is available
//* at the URL "http://www.eclipse.org/legal/epl-v10.html".
//*
//* Initial Contributors:
//* Nokia Corporation - initial contribution.
//*
//* Contributors:
//*
//* Description:
//*

// title MOD_0077.001_2_NokiaTSY_[NTSY started before test tool]
//
// NokiaTSY is started before test tool. This order is needed when
// test tool sends a request to NTSY at first OR some ISI indication is
// sent at first from tool to NTSY (e.g.call coming ind).
// In this case APDU_REQ APDU_ST_POWER_ON is sent by NTSY so that test tool has
// called HandleRequestL( ECustomPowerSimOnIPC ) <=> NTSY must be running
// before any requests can be done.
//
// Precondition:
// n/a, XML case
//
// Script description:
// -N/A
//
[Test]
title MOD_0077.001_2_NokiaTSY_[NTSY started before test tool]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC ECustomPowerSimOnIPC

test RunIscTestCase 101
test SyncIscTestCase
test PoweringSimOn

allownextresult 0 // ECustomPowerSimOnIPC
waittestclass test

test HandleSpecifiedRequests NO

delete test
[Endtest]

// MOD_0077.002_2_NokiaTSY_[NTSY started after test tool]
//
// Precondition:
// - N/A
//
// Script description:
//
// - Call timer is read from PMM during boot and read with ECustomGetLifeTimeIPC,
//   updated with EIPCUpdateNewLifeTimerValue and read again.
//
// In this case PERM_PM_RECORD_READ_REQ is sent during the boot so test tool
// must be running before NTSY is started.

[Test]
title MOD_0077.002_2_NokiaTSY_[NTSY started after test tool]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC ECustomGetLifeTimeIPC

test RunIscTestCaseStartNTSYAfterTestToolStart 102
test SyncIscTestCaseStartNTSYAfterTestToolStart

pause 2000

//  The currect time got during boot from PMM is 23356 hours 14 minutes
test GetLifeTimer 23356 13

// ECustomGetLifeTimeIPC
allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO

delete test

[Endtest]


// MOD_0013.001_2_NokiaTSY_[Get UICC status]
//
// Precondition:
// - N/A
//
// Script description:
//
// - Get UICC status
//
[Test]
title MOD_0013.001_2_NokiaTSY_[Get UICC status]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMmTsyBootNotifySimStatusReadyIPC
test RunIscTestCase 170
test SyncIscTestCase
test GetUiccStatus
allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO
delete test
[Endtest]

// MOD_0013.002_2_NokiaTSY_[Startup]
//
// Precondition:
// - N/A
//
// Script description:
//
// - UICC startup sequence
//
[Test]
title MOD_0013.002_2_NokiaTSY_[Startup]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMmTsyBootNotifySimStatusReadyIPC
test RunIscTestCase 171
test SyncIscTestCase
allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO
delete test
[Endtest]

// MOD_0013.003_2_NokiaTSY_[Get subscriber ID]
//
// Precondition:
// - N/A
//
// Script description:
//
// - Read IMSI from SIM file 6F07
//
[Test]
title MOD_0013.003_2_NokiaTSY_[Get subscriber ID]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMobilePhoneGetSubscriberId
test RunIscTestCase 172
test SyncIscTestCase
// Parameter: IMSI number for data checking
test GetSubscriberId 234334009813270
allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO
delete test
[Endtest]

// MOD_0013.004_2_NokiaTSY_[Get ciphering indicator status]
//
// Precondition:
// - N/A
//
// Script description:
//
// - Read IMSI from SIM file 6F07
//
[Test]
title MOD_0013.004_2_NokiaTSY_[Get ciphering indicator status]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMobilePhoneGetCipheringIndicatorStatus
test RunIscTestCase 168
test SyncIscTestCase
// Parameter: CI status for data checking
test GetCiStatus 1
allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO
delete test
[Endtest]


// MOD_0013_005_2_NokiaTSY_[Set call forwarding status]
//
// Precondition:
// - N/A
//
// Script description:
//
// - Write call forwarding status.
//
[Test]
title MOD_0013_005_2_NokiaTSY_[Set call forwarding status]
create NTT_uicc test

test HandleSpecifiedRequests YES

test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMobilePhoneSetCallForwardingStatus
test SetExpectedCompleteIPC ECustomNotifyIccCallForwardingStatusChangeIPC

test RunIscTestCase 173
test SyncIscTestCase
test SetCallFwdStatus CallForwardingBusy AllTele ServiceActionErase InternationalNumber TelexNumberPlan 04544101642 10 33

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO

delete test
[Endtest]

// MOD_0013.006_2_NokiaTSY_[Get EHPLMN]
//
// Precondition:
// - N/A
//
// Script description:
//
// - Read EHPLMN from SIM file 6FD9
//
[Test]
title MOD_0013.006_2_NokiaTSY_[Get EHPLMN]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMobilePhoneGetHomeNetwork
test RunIscTestCase 174
test SyncIscTestCase

test GetEhplmn
allownextresult 0
waittestclass test

delete test
[Endtest]

// MOD_0013.007_2_NokiaTSY_[Get HPLMN]
//
// Precondition:
// - N/A
//
// Script description:
//
// - Read IMSI from SIM file 6F07
//
[Test]
title MOD_0013.007_2_NokiaTSY_[Get HPLMN]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMobilePhoneGetHomeNetwork
test RunIscTestCase 175
test SyncIscTestCase

test GetEhplmn
allownextresult 0
waittestclass test

delete test
[Endtest]


// MOD_0013.008_2_NokiaTSY_[Get SPN]
//
// Precondition:
// - none
//
// Script description:
// - GetServiceProviderName
// - parameter: display request (1) for validity checking
//
[Test]
title MOD_0013.008_2_NokiaTSY_[Get SPN]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMobilePhoneGetServiceProviderName
test RunIscTestCase 176
test SyncIscTestCase
test GetServiceProviderName 6 GEMPLUS 772 513 1027 1541 2055 65289
allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO
delete test
[Endtest]



// MOD_0013.009_2_NokiaTSY_[Set call forwarding status]
//
// Precondition:
// - none
//
// Script description:
// - GetServiceProviderName
// - parameter: display request (1) for validity checking
//
[Test]
title MOD_0013.009_2_NokiaTSY_[Set call forwarding status REL4]
create NTT_uicc test

test HandleSpecifiedRequests YES

test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMobilePhoneSetCallForwardingStatus
test SetExpectedCompleteIPC ECustomNotifyIccCallForwardingStatusChangeIPC

test RunIscTestCase 177
test SyncIscTestCase
test SetCallFwdStatus CallForwardingUnconditional Telephony ServiceActionActivate SubscriberNumber TelexNumberPlan 04421212121 10 7

allownextresult 0
waittestclass test

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0010_2_NokiaTSY_[Set call forwarding status]
//
// Precondition:
// - none
//
// Script description:
// - GetServiceProviderName
// - parameter: display request (1) for validity checking
//
[Test]
title MOD_0013.0010_2_NokiaTSY_[Set call forwarding status CPHS]
create NTT_uicc test

test HandleSpecifiedRequests YES

test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMobilePhoneSetCallForwardingStatus
test SetExpectedCompleteIPC ECustomNotifyIccCallForwardingStatusChangeIPC

test RunIscTestCase 178
test SyncIscTestCase
test SetCallFwdStatus CallForwardingUnconditional Telephony ServiceActionActivate SubscriberNumber TelexNumberPlan 04421212121 10 7

allownextresult 0
waittestclass test

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO

delete test
[Endtest]

// MOD_0013.0011_2_NokiaTSY_[Get CSP]
//
// Precondition:
// - none
//
// Script description:
// - GetServiceProviderName
// - parameter: display request (1) for validity checking
//
[Test]
title MOD_0013.0011_2_NokiaTSY_[Get CSP]

create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMobilePhoneGetCustomerServiceProfile

test RunIscTestCase 179
test SyncIscTestCase

test GetCustomerServiceProfile 240 248 128 192 222 128 0 129 0 132

allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0012_2_NokiaTSY_[Read SIM file]
//
// Precondition:
// - none
//
[Test]
title MOD_0013.0012_2_NokiaTSY_[Read SIM file]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC ECustomReadSimFileIPC

test RunIscTestCase 180
test SyncIscTestCase

test ReadSimFile 16128 12258 0 0

allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0013_2_NokiaTSY_[Read mailbox identifier]
//
// Precondition:
// - none
//
[Test]
title MOD_0013.0013_2_NokiaTSY_[Read mailbox identifier]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMobilePhoneGetMailboxNumbers

test RunIscTestCase 181
test SyncIscTestCase

test GetMailboxIdentifier 1 0 3 0

allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0014_2_NokiaTSY_[Read CB topics]
//
// Precondition:
// - none
//
[Test]
title MOD_0013.0014_2_NokiaTSY_[Read CB topics]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC ECustomStartSimCbTopicBrowsingIPC

test RunIscTestCase 182
test SyncIscTestCase

test ReadCBSSimTopics 123 456 789

allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0015_2_NokiaTSY_[Delete CB topics]
//
// Precondition:
// - none
//
[Test]
title MOD_0013.0015_2_NokiaTSY_[Delete CB topics]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC ECustomStartSimCbTopicBrowsingIPC

test RunIscTestCase 183
test SyncIscTestCase

test DeleteCBSSimTopic 456

allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO

delete test
[Endtest]

// MOD_0013.0016_2_NokiaTSY_[Get ciphering indicator status custom]
//
// Precondition:
// - N/A
//
// Script description:
//
// - Read IMSI from SIM file 6F07
//
[Test]
title MOD_0013.0016_2_NokiaTSY_[Get ciphering indicator status custom]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC ECustomGetCipheringInfoIPC
test RunIscTestCase 184
test SyncIscTestCase
// Parameter: CI status for data checking
test GetCiStatusCustom 1
allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO
delete test
[Endtest]


// MOD_0013.0017_2_NokiaTSY_[Get operator name]
//
// Precondition:
// - none
// Script description:
// - parameter: NW provider name ( for validity checking )
//
[Test]
title MOD_0013.0017_2_NokiaTSY_[Get operator name]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC ECustomGetNetworkProviderNameIPC
test RunIscTestCase 185
test SyncIscTestCase
test GetNetworkProviderName Orange
allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO
delete test
[Endtest]


// MOD_0013.0018_2_NokiaTSY_[Get viag home zone params]
//
// Precondition:
// - none
// Script description:
// - EReadViagHomeZoneParamsIPC is requested from NTSY
//   response contents
//      {
//      smsc=1234567,
//      scp=89abcde,
//      zonever=EA,
//      viagelem[0]=
//          {
//          x=AABBCC01,
//          y=AABBCC10,
//          r2=AABBCC11,
//          id=01,
//          hz=00(Inactive),
//          tag=homezonetagA
//          }
//      viagelem[1]=
//          {
//          x=AABBCC02,
//          y=AABBCC20,
//          r2=AABBCC22,
//          id=02,
//          hz=01(HZACtive),
//          tag=homezonetagB
//          }
//      viagelem[2]=
//          {
//          x=AABBCC03,
//          y=AABBCC30,
//          r2=AABBCC33,
//          id=03,
//          hz=02(CZActive),
//          tag=homezonetagC
//          }
//      viagelem[3]=
//          {
//          x=AABBCC04,
//          y=AABBCC40,
//          r2=AABBCC44,
//          id=04,
//          hz=03(HZActive),
//          tag=homezonetagD
//          }
//      }
//
[Test]
title MOD_0013.0018_2_NokiaTSY_[Get viag home zone params]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EReadViagHomeZoneParamsIPC
test RunIscTestCase 186
test SyncIscTestCase

test ViagHomeZoneReadParam 1234567 89abcde EA AABBCC01 AABBCC10 AABBCC11 1 Inactive homezonetagA AABBCC02 AABBCC20 AABBCC22 2 HZActive homezonetagB AABBCC03 AABBCC30 AABBCC33 3 CZActive homezonetagC AABBCC04 AABBCC40 AABBCC44 4 CZActive homezonetagD

allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO
delete test
[Endtest]


// MOD_0013.0019_2_NokiaTSY_[Read HomeZone Cache]
//
// Precondition:
// -N/A
//
// Script description:
// - EReadViagHomeZoneCacheIPC is requested from NTSY
//   request contents
//      {
//      cacheid=04
//      recnum=06
//      }
// - CellMo responds with response contents
//      {
//      lac=AABB,
//      cellid=CCDD
//      }
[Test]
title MOD_0013.0019_2_NokiaTSY_[Read HomeZone Cache]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EReadViagHomeZoneCacheIPC

test RunIscTestCase 187
test SyncIscTestCase

test ViagHomeZoneReadCache 04 06 AABB CCDD

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO
delete test
[Endtest]

// MOD_0013.0020_2_NokiaTSY_[Write HomeZone Settings]
//
// Precondition:
// -N/A
//
// Script description:
// - EWriteViagHomeZoneUHZIUESettingsIPC is requested from NTSY
//   request contents
//      {
//      set=CE,
//      ver=05
//      }
[Test]
title MOD_0013.0020_2_NokiaTSY_[Write HomeZone Settings]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EWriteViagHomeZoneUHZIUESettingsIPC

test RunIscTestCase 188
test SyncIscTestCase

test ViagHomeZoneWriteSettings CE 05

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO
delete test
[Endtest]

// MOD_0013.0021_2_NokiaTSY_[Write HomeZone Cache]
//
// Precondition:
// -N/A
//
// Script description:
// - EWriteViagHomeZoneCacheIPC is requested from NTSY
//   request contents
//      {
//      cacheid=04,
//      recnum=09,
//      lac=BBAA,
//      cellid=CCDD
//      }
[Test]
title MOD_0013.0021_2_NokiaTSY_[Write HomeZone Cache]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EWriteViagHomeZoneCacheIPC

test RunIscTestCase 189
test SyncIscTestCase

test ViagHomeZoneWriteCache 04 09 BBAA CCDD

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO
delete test
[Endtest]


// MOD_0013.0022_2_NokiaTSY_[Read voice msg flags REL4]
//
// Precondition:
// -N/A
//
// Script description:
// - Read voice message flags from UICC
// - Parameters:
//    Message waiting indicator status = 1
//    Number of Voicemail Messages Waiting = 2
//    Number of Fax Messages Waiting = 3
//    Number of Electronic Mail Messages Waiting = 4
//    Number of Other Messages Waiting = 5
//
[Test]
title MOD_0013.0022_2_NokiaTSY_[Read voice msg flags REL4]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMobilePhoneGetIccMessageWaitingIndicators

test RunIscTestCase 190
test SyncIscTestCase

test ReadVoiceMsgFlagsRel4 01 02 03 04 05

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO
delete test
[Endtest]


// MOD_0013.0023_2_NokiaTSY_[Write voice msg flags REL4]
//
// Precondition:
// -N/A
//
// Script description:
// - Read voice message flags from UICC
// - Parameters:
//    Message waiting indicator status = 5
//    Number of Voicemail Messages Waiting = 4
//    Number of Fax Messages Waiting = 3
//    Number of Electronic Mail Messages Waiting = 2
//    Number of Other Messages Waiting = 1
//
[Test]
title MOD_0013.0023_2_NokiaTSY_[Write voice msg flags REL4]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMobilePhoneSetIccMessageWaitingIndicators
test SetExpectedCompleteIPC EMobilePhoneNotifyIccMessageWaitingIndicatorsChange

test RunIscTestCase 191
test SyncIscTestCase

test WriteVoiceMsgFlagsRel4 05 04 03 02 01

allownextresult 0
waittestclass test

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO
delete test
[Endtest]


// MOD_0013.0024_2_NokiaTSY_[Read voice msg flags CPHS]
//
// Precondition:
// -N/A
//
// Script description:
// - Read  CPHSvoice message flags from UICC
// - Parameters:
//    Message waiting indicator status = 17
//    Number of Voicemail Messages Waiting = 0
//    Number of Fax Messages Waiting = 0
//    Number of Electronic Mail Messages Waiting = 0
//    Number of Other Messages Waiting = 0
//
[Test]
title MOD_0013.0024_2_NokiaTSY_[Read voice msg flags CPHS]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMobilePhoneGetIccMessageWaitingIndicators

test RunIscTestCase 192
test SyncIscTestCase

test ReadVoiceMsgFlagsCphs 17 00 00 00 00

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO
delete test
[Endtest]


// MOD_0013.0025_2_NokiaTSY_[Write voice msg flags CPHS]
//
// Precondition:
// -N/A
//
// Script description:
// - Read voice message flags from UICC
// - Parameters:
//    Message waiting indicator status = 5
//    Number of Voicemail Messages Waiting = 4
//    Number of Fax Messages Waiting = 3
//    Number of Electronic Mail Messages Waiting = 2
//    Number of Other Messages Waiting = 1
//
[Test]
title MOD_0013.0025_2_NokiaTSY_[Write voice msg flags CPHS]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMobilePhoneGetIccMessageWaitingIndicators
test SetExpectedCompleteIPC EMobilePhoneSetIccMessageWaitingIndicators
test SetExpectedCompleteIPC EMobilePhoneNotifyIccMessageWaitingIndicatorsChange

test RunIscTestCase 193
test SyncIscTestCase

test ReadVoiceMsgFlagsCphs 17 00 00 00 00

allownextresult 0
waittestclass test

test WriteVoiceMsgFlagsCphs 17 00 00 00 00

allownextresult 0
waittestclass test

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO
delete test
[Endtest]


// MOD_0013.0026_2_NokiaTSY_[Read dynamic flags]
//
// Precondition:
// -N/A
//
// Script description:
// - Read dynamic flags (ALS line)from UICC
// - Parameters:
//    Dynamic flags = 0 ( primary line )
//
[Test]
title MOD_0013.0026_2_NokiaTSY_[Read dynamic flags]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMobilePhoneGetALSLine

test RunIscTestCase 194
test SyncIscTestCase

test ReadDynamicFlags 0

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO
delete test
[Endtest]


// MOD_0013.0027_2_NokiaTSY_[Write dynamic flags]
//
// Precondition:
// -N/A
//
// Script description:
// - Write dynamic flags (ALS line) from UICC
// - Parameters:
//    Dynamic flags = 1 (auxialiry line)
//
[Test]
title MOD_0013.0027_2_NokiaTSY_[Write dynamic flags]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC EMobilePhoneSetALSLine

test RunIscTestCase 195
test SyncIscTestCase

test WriteDynamicFlags 1

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO
delete test
[Endtest]


// MOD_0013.0028_2_NokiaTSY_[Read dynamic 2 flags]
//
// Precondition:
// -N/A
//
// Script description:
// - Read dynamic2 flags (ALS locked) from UICC
// - Parameters:
//    Dynamic flags = 1 ( ALS locked )
//
[Test]
title MOD_0013.0028_2_NokiaTSY_[Read dynamic 2 flags]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC ECustomGetAlsBlockedIPC

test RunIscTestCase 196
test SyncIscTestCase

test ReadDynamic2Flags 1

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO
delete test
[Endtest]


// MOD_0013.0029_2_NokiaTSY_[Write dynamic 2 flags]
//
// Precondition:
// -N/A
//
// Script description:
// - Write dynamic2 flags (ALS locked) to UICC
// - Parameters:
//    Dynamic flags = 0 ( ALS unlocked )
//
[Test]
title MOD_0013.0029_2_NokiaTSY_[Write dynamic 2 flags]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC ECustomSetAlsBlockedIPC

test RunIscTestCase 197
test SyncIscTestCase

test WriteDynamic2Flags 0

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO
delete test
[Endtest]


// MOD_0013.0030_2_NokiaTSY_[Modem and RF status queries in startup]
//
// Precondition:
// - N/A
//
// Script description:
// - Modem status and RF status queries in the startup
//

[Test]
title MOD_0013.0030_2_NokiaTSY_[Modem and RF status queries in startup]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMmTsyBootNotifyModemStatusReadyIPC
test SetExpectedCompleteIPC EMmTsyBootGetRFStatusIPC

test RunIscTestCaseStartNTSYAfterTestToolStart 198
test SyncIscTestCaseStartNTSYAfterTestToolStart

pause 2000

test GetRfStatus 4

allownextresult 0
waittestclass test

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO

delete test

[Endtest]


// MOD_0013.0031_2_NokiaTSY_[Modem status indication]
//
// Precondition:
// - N/A
//
// Script description:
// - Receive modem status indication
//

[Test]
title MOD_0013.0031_2_NokiaTSY_[Modem status indication]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMmTsyBootNotifyModemStatusReadyIPC
test SetExpectedCompleteIPC EMmTsyBootGetRFStatusIPC

test RunIscTestCase 199
test SyncIscTestCase

test GetRfStatus 4

allownextresult 0
waittestclass test

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO

delete test

[Endtest]


// MOD_0013.0032_2_NokiaTSY_[Get ICC type -fail]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0032_2_NokiaTSY_[Get ICC type -fail]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMmTsySimGetICCType

test RunIscTestCase 261
test SyncIscTestCase

pause 5000

// 2 = unknown
test GetIccType 2

pause 5000
allownextresult -2

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0033_2_NokiaTSY_[Notify security event - PIN1 required]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0033_2_NokiaTSY_[Notify security event - PIN1 required]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneNotifySecurityEvent

test RunIscTestCase 232
test SyncIscTestCase

// Parameter: security event ( TMobilePhoneSecurityEvent, EPin1Required (2) )
test NotifySecurityEvent 2

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0034_2_NokiaTSY_[Notify security event - PUK2 required]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0034_2_NokiaTSY_[Notify security event - PUK2 required]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneNotifySecurityEvent

test RunIscTestCase 233
test SyncIscTestCase

// Parameter: security event ( TMobilePhoneSecurityEvent, EPuk2Required (5) )
test NotifySecurityEvent 5

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0035_2_NokiaTSY_[Notify security event - UPIN required]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0035_2_NokiaTSY_[Notify security event - UPIN required]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneNotifySecurityEvent

test RunIscTestCase 234
test SyncIscTestCase

// Parameter: security event ( TMobilePhoneSecurityEvent, EUpinRequired (20) )
test NotifySecurityEvent 20

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0036_2_NokiaTSY_[Notify security event - incorrect PIN ID]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0036_2_NokiaTSY_[Notify security event - incorrect PIN ID]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneNotifySecurityEvent

test RunIscTestCase 235
test SyncIscTestCase

// Parameter: security event ( TMobilePhoneSecurityEvent, ENoICCFound (0) )
test NotifySecurityEvent 0

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0037_2_NokiaTSY_[Verify PIN1]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0037_2_NokiaTSY_[Verify PIN1]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneNotifySecurityEvent
test SetExpectedCompleteIPC EMobilePhoneVerifySecurityCode

test NotifySecurityEvent 2

test RunIscTestCase 236
test SyncIscTestCase

allownextresult 0
waittestclass test

// Parameters: Code type, PIN code
test VerifySecurityCode ESecurityCodePin1 1234

pause 5000
test RunIscTestCase 259
test SyncIscTestCase

pause 5000

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0038_2_NokiaTSY_[Verify PUK2]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0038_2_NokiaTSY_[Verify PUK2]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneNotifySecurityEvent
test SetExpectedCompleteIPC EMobilePhoneVerifySecurityCode

test NotifySecurityEvent 5

test RunIscTestCase 237
test SyncIscTestCase

allownextresult 0
waittestclass test

// Parameters: Code type, PIN code, PUK code
test VerifySecurityCode ESecurityCodePuk2 1234 12345678

pause 5000
test RunIscTestCase 259
test SyncIscTestCase

pause 5000

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0039_2_NokiaTSY_[Verify UPIN - Incorrect UPIN]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0039_2_NokiaTSY_[Verify UPIN - Incorrect UPIN]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneNotifySecurityEvent
test SetExpectedCompleteIPC EMobilePhoneVerifySecurityCode

test NotifySecurityEvent 20

test RunIscTestCase 238
test SyncIscTestCase

allownextresult 0
waittestclass test

// Parameters: Code type, PIN code, PUK code
test VerifySecurityCode ESecurityUniversalPin 5555

pause 5000
test RunIscTestCase 260
test SyncIscTestCase

pause 5000


test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0040_2_NokiaTSY_[PIN1 state query]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0040_2_NokiaTSY_[PIN1 state query]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneGetLockInfo

test RunIscTestCase 239
test SyncIscTestCase

pause 5000

test RunIscTestCase 240
test SyncIscTestCase

test GetPinInfo ELockICC SIMLockDisabled Unlocked
pause 5000

allownextresult 0

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0041_2_NokiaTSY_[PIN2 state query]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0041_2_NokiaTSY_[PIN2 state query]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneGetLockInfo

test RunIscTestCase 245 // UICC_CARD_IND, card type UICC
test SyncIscTestCase

pause 5000

test RunIscTestCase 242
test SyncIscTestCase

pause 5000

test RunIscTestCase 243
test SyncIscTestCase

test GetPinInfo ELockPin2 SIMLockEnabled Blocked
pause 5000

allownextresult 0

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0043_2_NokiaTSY_[PIN code state change]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0043_2_NokiaTSY_[PIN code state change - UPIN]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneSetLockSetting

test RunIscTestCase 250
test SyncIscTestCase

// Parameters: Code type, new setting, PIN code
test SetLockSetting ELockUniversalPin ELockSetEnabled 1234

pause 5000

test RunIscTestCase 251
test SyncIscTestCase

pause 5000

allownextresult 0

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0044_2_NokiaTSY_[PIN1 attempts left query]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0044_2_NokiaTSY_[PIN1 attempts left query]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneGetSecurityCodeInfo

test RunIscTestCase 239
test SyncIscTestCase

pause 5000

test RunIscTestCase 252
test SyncIscTestCase

test GetPinAttemptsLeft ESecurityCodePin1 3
pause 5000

allownextresult 0

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0045_2_NokiaTSY_[Substitute PIN by UPIN]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0045_2_NokiaTSY_[Substitute PIN by UPIN]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneSetLockSetting

test RunIscTestCase 239
test SyncIscTestCase

pause 5000

test RunIscTestCase 253
test SyncIscTestCase

// Parameters: Code type, new setting, PIN code
test SetLockSetting ELockUniversalPin ELockSetReplaced 1234

pause 5000
allownextresult 0

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0046_2_NokiaTSY_[Substitute UPIN by PIN]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0046_2_NokiaTSY_[Substitute UPIN by PIN]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneSetLockSetting

test RunIscTestCase 239
test SyncIscTestCase

pause 5000

test RunIscTestCase 254
test SyncIscTestCase

// Parameters: Code type, new setting, PIN code
test SetLockSetting ELockICC ELockSetReplaced 1234

pause 5000
allownextresult 0

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0047_2_NokiaTSY_[Get ICC type]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0047_2_NokiaTSY_[Get ICC type]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMmTsySimGetICCType

test RunIscTestCase 255
test SyncIscTestCase

pause 5000

test GetIccType 1

pause 5000
allownextresult 0

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0048_2_NokiaTSY_[Get active USIM application]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0048_2_NokiaTSY_[Get active USIM application ]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneGetCurrentActiveUSimApplication

test RunIscTestCase 256
test SyncIscTestCase

pause 5000

test GetCurrentActiveUSIMApplication 147377136

pause 5000
allownextresult 0

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0049_2_NokiaTSY_[Get active PIN - PIN1]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0049_2_NokiaTSY_[Get active PIN - PIN1 ]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMmTsySecurityGetSimActivePinStateIPC

test RunIscTestCase 257
test SyncIscTestCase

pause 5000

test GetActivePin 0

pause 5000
allownextresult 0

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0050_2_NokiaTSY_[Get active PIN - PIN1]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0050_2_NokiaTSY_[Get active PIN - UPIN ]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMmTsySecurityGetSimActivePinStateIPC

test RunIscTestCase 258
test SyncIscTestCase

pause 5000

test GetActivePin 0

pause 5000
allownextresult 0

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0051_2_NokiaTSY_[Change PIN1 - successful]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0051_2_NokiaTSY_[Change PIN1 - successful]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneChangeSecurityCode

test RunIscTestCase 239
test SyncIscTestCase

pause 5000

test RunIscTestCase 246
test SyncIscTestCase

// Parameters: Code type, PIN code, PUK code
test ChangePinCode ESecurityCodePin1 1234 5678

pause 5000

test RunIscTestCase 247
test SyncIscTestCase

allownextresult 0

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0052_2_NokiaTSY_[Change PIN2 - fail]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0052_2_NokiaTSY_[Change PIN2 - fail]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneChangeSecurityCode

test RunIscTestCase 242 // PIN ID '0x87'
test SyncIscTestCase

pause 5000

test RunIscTestCase 248
test SyncIscTestCase

// Parameters: Code type, PIN code, PUK code
test ChangePinCode ESecurityCodePin2 0000 1111

pause 5000

test HandleSpecifiedRequests NO

delete test
[Endtest]


// MOD_0013.0053_2_NokiaTSY_[ICC PIN ID]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0053_2_NokiaTSY_[ICC PIN ID]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC EMobilePhoneChangeSecurityCode

test RunIscTestCase 262 // PIN ID '0x87'
test SyncIscTestCase

pause 5000

test RunIscTestCase 248
test SyncIscTestCase

// Parameters: Code type, PIN code, PUK code
test ChangePinCode ESecurityCodePin2 0000 1111

pause 5000

test HandleSpecifiedRequests NO

delete test
[Endtest]




// MOD_0013.0054_2_NokiaTSY_[Power off SIM]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0054_2_NokiaTSY_[Power off SIM]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC ECustomPowerSimOffIPC
test RunIscTestCase 224
test SyncIscTestCase
test PowerOffSim
allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO
delete test
[Endtest]

// MOD_0013.0056_2_NokiaTSY_[Power on SIM]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0056_2_NokiaTSY_[Power on SIM]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC ECustomNotifySimCardStatusIPC
test SetExpectedCompleteIPC ECustomPowerSimOnIPC

test RunIscTestCase 227
test SyncIscTestCase
test PowerOnSim
allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO
delete test
[Endtest]

// MOD_0013.0057_2_NokiaTSY_[SIM warm reset]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0057_2_NokiaTSY_[SIM warm reset]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC ECustomSimWarmResetIPC
test RunIscTestCase 225
test SyncIscTestCase
test SimWarmReset
allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO
delete test
[Endtest]

// MOD_0013.0058_2_NokiaTSY_[SIM Get ATR]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0058_2_NokiaTSY_[SIM Get ATR]
create NTT_uicc test
test HandleSpecifiedRequests YES
test InitializeIPCRequestTable
test SetExpectedCompleteIPC ECustomGetATRIPC
test RunIscTestCase 226
test SyncIscTestCase
test SimGetATR
allownextresult 0
waittestclass test
test HandleSpecifiedRequests NO
delete test
[Endtest]


// MOD_0013.0059_2_NokiaTSY_[Send APDU v2]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0059_2_NokiaTSY_[Send APDU v2]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC ECustomSendAPDUReqV2IPC

test RunIscTestCase 228
test SyncIscTestCase

test SendAPDUv2

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO

delete test
[Endtest]

// MOD_0013.0060_2_NokiaTSY_[Get Card Reader Status]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0060_2_NokiaTSY_[Get Card Reader Status]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC ECustomGetSimCardReaderStatusIPC

test RunIscTestCase 229
test SyncIscTestCase

test GetCardReaderStatus

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO

delete test
[Endtest]



// MOD_0013.0061_2_NokiaTSY_[SIM card indication - card removed]
//
// Precondition:
// - none
// Script description:
// -
//
[Test]
title MOD_0013.0061_2_NokiaTSY_[SIM card indication - card removed]
create NTT_uicc test

test HandleSpecifiedRequests YES
test InitializeIPCRequestTable

test SetExpectedCompleteIPC ECustomNotifySimCardStatusIPC

test RunIscTestCase 230
test SyncIscTestCase

test SIMCardInd

allownextresult 0
waittestclass test

test HandleSpecifiedRequests NO

delete test
[Endtest]