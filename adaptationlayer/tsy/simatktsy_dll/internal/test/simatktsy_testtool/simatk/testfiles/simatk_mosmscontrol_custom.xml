<?xml version="1.0" encoding="utf-8"?> 

<!-- MOD_1004.001_SIM_ATK_TSY_[MO SMS Control - out of network coverage] -->
<!-- MOD_1004.002_SIM_ATK_TSY_[MO SMS Control - Long Alpha ID] -->
<!-- MOD_1004.003_SIM_ATK_TSY_[MO SMS Control - Extented Cell ID] -->


<isc-test-control id="1004"> 

<!--

                     ID numbering plan
                     =================
10000__PCMD
20000______ATK >- MO_SM_CONTROL_REQ   -> SIM ATK TSY
40000______ATK <- envelope -< SIM ATK TSY
45000______ATK >-  sw ntf  -> SIM ATK TSY
25000______ATK <- MO_SM_CONTROL_RESP  -< SIM ATK TSY
15000___TR

-->

<!-- ******** -->
<!-- CHANNELS -->
<!-- ******** -->
<channels>
	<channel id="0x07"/>
</channels>


<!-- ****** -->
<!-- INPUTS -->
<!-- ****** -->
<inputs>

<!-- PROACTIVE COMMANDS -->
<!-- ****************** -->

    <input id="10001">
        <name>SEND SHORT MESSAGE 1.1.1</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,00,00,00,10,00,55,00,3B,D0,37,81,03,01,13,00,82,02,81,83,85,07,53,65,6E,64,20,53,4D,86,09,91,11,22,33,44,55,66,77,F8,8B,18,01,00,09,91,10,32,54,76,F8,40,F4,0C,54,65,73,74,20,4D,65,73,73,61,67,65,90,00</message>
    </input>


<!-- ATK SERVER -->
<!-- ********** -->

    <input id="20001">
        <name>MO_SM_CONTROL_REQ, Seq 1.1</name>
        <direction>sos</direction>
                                    <!--DA Address sb:        type:ton/npi:   12345678     SMSC sb:        type:ton/npi:   112233445566778    -->
        <message>00,00,10,5a,00,26,00,01,0b,35,00,02,c0,00,00,10,01,07,09,91,10,32,54,76,f8,00,00,00,c0,00,00,10,02,0a,09,91,11,22,33,44,55,66,77,f8</message>
    </input>

    <input id="20002">
        <name>ATK_DATA_NTF, Allowed, no modifications</name>
        <direction>sos</direction>
        <message>00,00,00,5A,00,00,00,00,00,13,00,00,90,00,00,02,00,00</message>
    </input>

    <input id="20003">
        <name>ATK_DATA_NTF, Not allowed</name>
        <direction>sos</direction>
        <message>00,00,00,5A,00,00,00,00,00,13,00,00,90,00,00,02,01,00</message>
    </input>

    <input id="20004">
        <name>ATK_DATA_NTF, Allowed with modifications</name>
        <direction>sos</direction>
        <message>00,00,00,5A,00,00,00,00,00,13,00,00,90,00,00,15,02,13,86,09,91,11,22,33,44,55,66,77,F9,86,06,91,10,32,54,76,F9</message>
    </input>

    <input id="20005">
        <name>ATK_DATA_NTF, Allowed "90 00"</name>
        <direction>sos</direction>
        <message>00,00,00,5A,00,00,00,00,00,13,00,00,90,00,00,00</message>
    </input>

    <input id="20006">
        <name>ATK_DATA_NTF, Allowed + long Alpha ID</name>
        <direction>sos</direction>
        <message>00,00,00,5A,00,00,00,00,00,13,00,00,90,00,00,F9,00,81,F6,85,81,F3,4D,4F,20,53,4D,20,63,6F,6E,74,72,6F,6C,20,67,69,76,65,73,20,74,68,65,20,66,6F,6C,6C,6F,77,69,6E,67,20,72,65,73,70,6F,6E,73,65,20,63,6F,6E,74,61,69,6E,69,6E,67,20,74,68,69,73,20,76,65,72,79,20,6C,6F,6F,6F,6E,67,20,61,6C,70,68,61,20,69,64,65,6E,74,69,66,69,65,72,20,74,68,6F,75,67,68,20,74,68,69,73,20,6D,61,79,20,62,65,20,74,72,75,6E,63,61,74,65,64,20,62,79,20,74,68,65,20,6D,6F,62,69,6C,65,20,65,71,75,69,70,6D,65,6E,74,21,21,20,54,68,65,20,6C,65,6E,67,74,68,20,69,73,20,32,35,30,21,21,21,20,54,68,65,20,6C,65,6E,67,74,68,20,69,73,20,32,35,30,21,21,21,20,54,68,65,20,6C,65,6E,67,74,68,20,69,73,20,32,35,30,21,21,21,20,54,68,65,20,6C,65,6E,67,74,68,20,69,73,20,32,35,30,21,21,21,20,54,68,65,20,6C,65,6E,67,74,68,20,69,73,20,32,35</message>
    </input>


<!-- SMS SERVER -->
<!-- ********** -->

    <input id="30001">
        <name>SMS_RESOURCE_CONF_RESP, SMS_OK</name>
        <direction>sos</direction>
        <message>15,00,10,02,00,06,00,00,C5,46,02,01,00,2A,00,08,00,00,00,00</message>
    </input>

    <input id="30005">
        <name>SMS_RESOURCE_IND</name>
        <direction>sos</direction>
        <message>15,00,10,02,00,06,00,00,C5,4B,00,04,00,2A,00,08,00,01,00,00,00,2E,00,08,00,00,00,00,00,82,00,10,02,09,91,11,22,33,44,55,66,77,f8,00,00,1C,00,14,0C,00,01,00,0B,91,10,32,54,76,F8,7F,16,00,00,00</message>
    </input>

    <input id="30006">
        <name>SMS_RESOURCE_RESP, SMS_OK</name>
        <direction>sos</direction>
        <message>15,00,10,02,00,06,00,00,C5,4A,00,02,00,2E,00,08,00,00,00,00,00,29,00,08,00,00,00,00</message>
    </input>

    <input id="30007">
        <name>SMS_RESOURCE_CONF_IND, START_UP</name>
        <direction>sos</direction>
        <message>15,00,10,02,00,06,00,00,C5,47,01,02,00,2A,00,08,00,01,00,00,00,28,00,08,00,01,00,00</message>
    </input>
    
    <!-- USED BY: -->
    <input id="30002">
        <name>SMS_MESSAGE_SEND_RESP, OK</name>
        <direction>sos</direction>
        <message>00,00,00,02,00,00,00,00,04,03,00,01,0C,08,00,00,00,00,00,00</message>
    </input>

    <input id="30003">
        <name>SMS_MESSAGE_SEND_RESP, SMS_ERR_SAT_MO_CONTROL_REJECT</name>
        <direction>sos</direction>
        <message>00,00,00,02,00,00,00,00,04,03,00,01,0C,08,00,13,00,00,00,00</message>
    </input>

    <input id="30004">
        <name>SMS_MESSAGE_SEND_RESP, SMS_ERR_SAT_MO_CONTROL_MODIFIED </name>
        <direction>sos</direction>
        <message>00,00,00,02,00,00,00,00,04,03,00,01,0C,08,00,12,00,00,00,00</message>
    </input>


<!-- SIM SERVER -->
<!-- ********** -->

    <input id="40001">
        <name>SIM_READ_TABLE_RESP, MO SMS Control is allocated and activated on the SIM</name>
        <direction>sos</direction>
        <message>00,00,00,09,00,00,00,00,CC,14,24,01,00,00</message>
    </input>

    <input id="40002">
        <name>SIM_ICC_TYPE_RESP-SIM_3G</name>
        <direction>sos</direction>
        <message>00,00,00,09,12,00,00,00,07,df,01,01,00,00,00,01,01,90,00,08,01,03,00,00,00,00</message>
    </input>


<!-- NETWORK SERVER -->
<!-- ************** -->

    <input id="50001">
        <name>NET_CELL_INFO_IND: no service, power save mode</name>
        <direction>sos</direction>
        <message>00,00,00,C8,00,1A,20,01,00,42,00,01,46,14,C0,95,55,55,55,55,00,00,00,01,62,F2,20,01,02,00,00,00</message>
    </input>

    <input id="50002">
        <name>NET_CELL_INFO_IND: CellId 1, LAC 1,</name>
        <direction>sos</direction>
        <message>00,00,00,C8,00,1A,20,01,00,42,00,01,46,14,00,01,00,00,00,01,00,00,00,01,00,F1,10,00,00,00,00,00</message>
    </input>

    <input id="50003">
        <name>NET_CELL_INFO_IND: CellId 1, LAC 1, Network mode Utran</name>
        <direction>sos</direction>
        <message>00,00,00,C8,00,1A,20,01,00,42,00,01,47,14,00,01,00,00,00,01,00,00,00,01,00,F1,10,00,00,00,00,00</message>
    </input>

    <input id="50004">
        <name>NET_RAT_IND -NET_RAT_UMTS</name>
        <direction>sos</direction>
        <message>00,00,00,C8,0f,00,00,3e,00,35,00,01,2c,08,02,00,00,00,00,00,00,00</message>
    </input>


<!-- SIM SESSION END -->
<!-- *************** -->

    <input id="90004">
        <name>ATK_SW_DATA_NTF: PROACTIVE SIM SESSION ENDED</name>
        <direction>sos</direction>
        <message>00,00,00,5A,00,00,78,34,00,13,00,00,90,00,00,00</message>
    </input>

</inputs>


<!-- ******* -->
<!-- OUTPUTS -->
<!-- ******* -->
<outputs>

<!-- ATK SERVER -->
<!-- ********** -->

    <output id="25001">
        <name>ATK_MO_SM_CONTROL_RESP, Allowed</name>
        <direction>dos</direction>
        <message>00,00,10,5a,00,00,00,00,0b,36,00,00</message>
           <mask>00,00,00,FF,00,00,00,00,FF,FF,FF,FF</mask>
    </output>

    <output id="25002">
        <name>ATK_MO_SM_CONTROL_RESP, Not Allowed</name>
        <direction>dos</direction>
        <message>00,00,10,5a,00,00,00,00,0b,36,01,00</message>
           <mask>00,00,00,FF,00,00,00,00,FF,FF,FF,FF</mask>
    </output>

    <output id="25003">
        <name>ATK_MO_SM_CONTROL_RESP, Allowed with modifications</name>
        <direction>dos</direction>
        <message>00,00,00,5A,00,00,00,00,0B,36,02,02,C0,00,00,10,02,0A,09,91,11,22,33,44,55,66,77,F9,C0,00,00,10,01,07,09,91,10,32,54,76,F9,00,00,00</message>
           <mask>00,00,00,FF,00,00,00,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF</mask>
    </output>

    <output id="25004">
        <name>ATK_MO_SM_CONTROL_RESP, Allowed with modifications + long Alpha ID</name>
        <direction>dos</direction>
        <message>00,00,00,5A,00,00,00,00,0B,36,00,01,B4,00,01,F0,00,00,00,F3,00,4D,00,4F,00,20,00,53,00,4D,00,20,00,63,00,6F,00,6E,00,74,00,72,00,6F,00,6C,00,20,00,67,00,69,00,76,00,65,00,73,00,20,00,74,00,68,00,65,00,20,00,66,00,6F,00,6C,00,6C,00,6F,00,77,00,69,00,6E,00,67,00,20,00,72,00,65,00,73,00,70,00,6F,00,6E,00,73,00,65,00,20,00,63,00,6F,00,6E,00,74,00,61,00,69,00,6E,00,69,00,6E,00,67,00,20,00,74,00,68,00,69,00,73,00,20,00,76,00,65,00,72,00,79,00,20,00,6C,00,6F,00,6F,00,6F,00,6E,00,67,00,20,00,61,00,6C,00,70,00,68,00,61,00,20,00,69,00,64,00,65,00,6E,00,74,00,69,00,66,00,69,00,65,00,72,00,20,00,74,00,68,00,6F,00,75,00,67,00,68,00,20,00,74,00,68,00,69,00,73,00,20,00,6D,00,61,00,79,00,20,00,62,00,65,00,20,00,74,00,72,00,75,00,6E,00,63,00,61,00,74,00,65,00,64,00,20,00,62,00,79,00,20,00,74,00,68,00,65,00,20,00,6D,00,6F,00,62,00,69,00,6C,00,65,00,20,00,65,00,71,00,75,00,69,00,70,00,6D,00,65,00,6E,00,74,00,21,00,21,00,20,00,54,00,68,00,65,00,20,00,6C,00,65,00,6E,00,67,00,74,00,68,00,20,00,69,00,73,00,20,00,32,00,35,00,30,00,21,00,21,00,21,00,20,00,54,00,68,00,65,00,20,00,6C,00,65,00,6E,00,67,00,74,00,68,00,20,00,69,00,73,00,20,00,32,00,35,00,30,00,21,00,21,00,21,00,20,00,54,00,68,00,65,00,20,00,6C,00,65,00,6E,00,67,00,74,00,68,00,20,00,69,00,73,00,20,00,32,00,35,00,30,00,21,00,21,00,21,00,20,00,54,00,68,00,65,00,20,00,6C,00,65,00,6E,00,67,00,74,00,68,00,20,00,69,00,73,00,20,00,32,00,35,00,30,00,21,00,21,00,21,00,20,00,54,00,68,00,65,00,20,00,6C,00,65,00,6E,00,67,00,74,00,68,00,20,00,69,00,73,00,20,00,32,00,35,00,00</message>
           <mask>00,00,00,FF,00,00,00,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF</mask>
    </output>


<!-- SMS SERVER -->
<!-- ********** -->

    <output id="35001">
        <name>SMS_RESOURCE_CONF_REQ, with no resource id</name>
        <direction>dos</direction>
        <message>00,00,00,02,00,06,00,00,C5,45,02,01,00,2B,00,08,00,00,00,00</message>
           <mask>00,00,00,FF,00,00,00,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF</mask>
    </output>

    <output id="35002">
        <name>SMS_RESOURCE_CONF_REQ, with resource id</name>
        <direction>dos</direction>
        <message>00,00,00,02,00,06,00,00,C5,45,02,01,00,2B,00,08,00,01,00,01</message>
           <mask>00,00,00,FF,00,00,00,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF</mask>
    </output>

    <output id="35003">
        <name>SMS_RESOURCE_REQ, Allowed</name>
        <direction>dos</direction>
        <message>00,00,00,02,00,06,00,00,C5,49,00,05,00,2A,00,08,00,01,00,00,00,2E,00,08,00,00,00,00,00,2F,00,08,01,00,00,00,00,82,00,10,02,09,91,11,22,33,44,55,66,77,F8,00,00,1C,00,14,0C,00,01,00,0B,91,10,32,54,76,F8,7F,16,00,00,00</message>
           <mask>00,00,00,FF,00,00,00,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF</mask>
    </output>

    <output id="35004">
        <name>SMS_RESOURCE_REQ, Not Allowed</name>
        <direction>dos</direction>
        <message>00,00,00,02,00,06,00,00,C5,49,00,06,00,2A,00,08,00,01,00,00,00,2E,00,08,00,00,00,00,00,2F,00,08,02,00,00,00,00,82,00,10,02,09,91,11,22,33,44,55,66,77,F8,00,00,1C,00,14,0C,00,01,00,0B,91,10,32,54,76,F8,7F,16,00,00,00,00,29,00,08,00,06,00,00</message>
           <mask>00,00,00,FF,00,00,00,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF</mask>
    </output>

    <output id="35005">
        <name>SMS_RESOURCE_REQ, Not Allowed with modification</name>
        <direction>dos</direction>
        <message>00,00,00,02,00,06,00,00,C5,49,00,05,00,2A,00,08,00,01,00,00,00,2E,00,08,00,00,00,00,00,2F,00,08,01,00,00,00,00,82,00,10,02,09,91,11,22,33,44,55,66,77,F9,00,00,1C,00,14,0C,00,01,00,0B,91,10,32,54,76,F9,7F,16,00,00,00</message>
           <mask>00,00,00,FF,00,00,00,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF</mask>
    </output>


<!-- SIM SERVER -->
<!-- ********** -->

<!-- Imposible to catch this message with ISC test control as the NokiaTSY uses the same message in boot and ISC get confused -->
<!-- If something can be done to avoid the confusion, then this message should be added to the test cases -->
<!-- For now, this is not used -->
    <output id="45001">
        <name>SIM_READ_TABLE_REQ: MO SMS Control activity check</name>
        <direction>dos</direction>
        <message>00,00,00,09,00,05,00,00,AA,13,24</message>
           <mask>00,00,00,FF,00,00,00,00,FF,FF,FF</mask>
    </output>

    <output id="46001">
        <name>ATK_ENVELOPE_NTF, Seq1.1 </name>
        <direction>dos</direction>
        <message>00,00,00,5A,00,2A,00,00,C9,12,00,22,D5,20,02,02,82,81,06,09,91,11,22,33,44,55,66,77,F8,06,06,91,10,32,54,76,F8,13,07,00,F1,10,00,01,00,01,00,00</message>
           <mask>00,00,00,FF,00,00,00,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF</mask>
    </output>

    <output id="46002">
        <name>ATK_ENVELOPE_NTF, Seq1.1, Extented cell id </name>
        <direction>dos</direction>
        <message>00,00,00,5A,00,2A,00,00,C9,12,00,24,D5,22,02,02,82,81,06,09,91,11,22,33,44,55,66,77,F8,06,06,91,10,32,54,76,F8,13,09,00,F1,10,00,01,00,01,00,00</message>
           <mask>00,00,00,FF,00,00,00,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF</mask>
    </output>


<!-- TERMINAL RESPONSES -->

    <output id="15000">
        <name>Terminal response, success</name>
        <direction>dos</direction>
        <message>00,00,10,5A,00,00,00,08,00,11,00,00,00,0C,81,03,01,13,00,82,02,82,81,83,01,00,00,00</message>
           <mask>00,00,00,FF,00,00,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,7F,FF,FF,FF,FF</mask>
    </output>

    <output id="15001">
        <name>Terminal response, rejected</name>
        <direction>dos</direction>
        <message>00,00,10,5A,00,00,00,08,00,11,00,00,00,0D,81,03,01,13,00,82,02,82,81,83,02,39,01,00</message>
           <mask>00,00,00,FF,00,00,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,7F,FF,FF,FF,FF</mask>
    </output>

</outputs>


<!-- ********** -->
<!-- TEST STEPS -->
<!-- ********** -->
<steps>


<!-- INPUTS -->
<!-- ****** -->

<!-- PROACTIVE COMMANDS -->
<!-- ****************** -->

    <step id="10001" type="simulate">
        <name>SEND SHORT MESSAGE 1.1.1</name>
        <channel id="0x07"/>
        <input-ref id="10001"/>
    </step>

<!-- ATK SERVER -->
<!-- ********** -->

    <step id="20001" type="simulate">
        <name>Simulate MO_SM_CONTROL_REQ</name>
        <channel id="0x07"/>
        <input-ref id="20001"/>
    </step>

    <step id="20002" type="simulate">
        <name>Simulate ATK_SW_DATA_NTF, allowed no modifications</name>
        <channel id="0x07"/>
        <input-ref id="20002"/>
        <flags>0x40</flags>
    </step>

    <step id="20003" type="simulate">
        <name>Simulate ATK_SW_DATA_NTF, Not allowed</name>
        <channel id="0x07"/>
        <input-ref id="20003"/>
        <flags>0x40</flags>
    </step>

    <step id="20004" type="simulate">
        <name>Simulate ATK_SW_DATA_NTF, Allowed with modifications</name>
        <channel id="0x07"/>
        <input-ref id="20004"/>
        <flags>0x40</flags>
    </step>

    <step id="20005" type="simulate">
        <name>Simulate ATK_SW_DATA_NTF, Allowed "90 00"</name>
        <channel id="0x07"/>
        <input-ref id="20005"/>
        <flags>0x40</flags>
    </step>

    <step id="20006" type="simulate">
        <name>Simulate ATK_SW_DATA_NTF, Allowed + long alpha ID</name>
        <channel id="0x07"/>
        <input-ref id="20006"/>
        <flags>0x40</flags>
    </step>


<!-- SMS SERVER -->
<!-- ********** -->

    <step id="30001" type="simulate">
        <name>Simulate SMS_RESOURCE_CONF_RESP, SMS_OK</name>
        <channel id="0x07"/>
        <input-ref id="30001"/>
    </step>
    
    <step id="30005" type="simulate">
        <name>Simulate SMS_RESOURCE_IND</name>
        <channel id="0x07"/>
        <input-ref id="30005"/>
    </step>

    <step id="30006" type="simulate">
        <name>Simulate SMS_RESOURCE_RESP</name>
        <channel id="0x07"/>
        <input-ref id="30006"/>
    </step>

    <step id="30007" type="simulate">
        <name>Simulate SMS_RESOURCE_CONF_IND</name>
        <channel id="0x07"/>
        <input-ref id="30007"/>
    </step>

    <step id="30002" type="simulate">
        <name>Simulate SMS_MESSAGE_SEND_RESP, SMS_OK</name>
        <channel id="0x07"/>
        <input-ref id="30002"/>
    </step>

    <step id="30003" type="simulate">
        <name>Simulate SMS_MESSAGE_SEND_RESP, rejected</name>
        <channel id="0x07"/>
        <input-ref id="30003"/>
    </step>

    <step id="30004" type="simulate">
        <name>Simulate SMS_MESSAGE_SEND_RESP, Allowed with modifications</name>
        <channel id="0x07"/>
        <input-ref id="30004"/>
    </step>

<!-- SIM SERVER -->
<!-- ********** -->

    <step id="40001" type="simulate">
        <name>SIM_READ_TABLE_RESP, MO SMS Control active</name>
        <channel id="0x07"/>
        <input-ref id="40001"/>
    </step>

    <step id="40002" type="simulate">
        <name>SIM_ICC_TYPE_RESP, SIM_3G</name>
        <channel id="0x07"/>
        <input-ref id="40002"/>
    </step>


<!-- NETWORK SERVER -->
<!-- ************** -->

    <step id="50001" type="simulate">
        <name>Simulate NET_CELL_INFO_IND</name>
        <channel id="0x07"/>
        <input-ref id="50001"/>
    </step>

    <step id="50002" type="simulate">
        <name>Simulate NET_CELL_INFO_IND, GCF settings</name>
        <channel id="0x07"/>
        <input-ref id="50002"/>
    </step>

    <step id="50003" type="simulate">
        <name>Simulate NET_CELL_INFO_IND, extented cell id</name>
        <channel id="0x07"/>
        <input-ref id="50003"/>
    </step>

    <step id="50004" type="simulate">
        <name>NET_RAT_IND, NET_RAT_INFO-NET_UMTS_RAT</name>
        <channel id="0x07"/>
        <input-ref id="50004"/>
    </step>


<!-- OUTPUTS -->
<!-- ******* -->

<!-- TERMINAL RESPONSES -->

    <step id="15000" type="intercept">
        <name>Analyze Terminal response, Success</name>
        <channel id="0x07"/>
        <output-ref id="15000"/>
        <flags>0x40</flags>
    </step>

    <step id="15001" type="intercept">
        <name>Analyze Terminal response, rejected</name>
        <channel id="0x07"/>
        <output-ref id="15001"/>
        <flags>0x40</flags>
    </step>


<!-- ATK SERVER -->
<!-- ********** -->

    <step id="25001" type="intercept">
        <name>Analyze ATK_MO_SM_CONTROL_RESP, Allowed</name>
        <channel id="0x07"/>
        <output-ref id="25001"/>
    </step>

    <step id="25002" type="intercept">
        <name>Analyze ATK_MO_SM_CONTROL_RESP, Rejected</name>
        <channel id="0x07"/>
        <output-ref id="25002"/>
        <flags>0x01</flags> <!-- Ignore unexpected messages  -->
    </step>

    <step id="25003" type="intercept">
        <name>Analyze ATK_MO_SM_CONTROL_RESP, Allowed with modifications</name>
        <channel id="0x07"/>
        <output-ref id="25003"/>
        <flags>0x01</flags> <!-- Ignore unexpected messages  -->
    </step>

    <step id="25004" type="intercept">
        <name>Analyze ATK_MO_SM_CONTROL_RESP, Allowed + long alpha ID</name>
        <channel id="0x07"/>
        <output-ref id="25004"/>
        <flags>0x01</flags> <!-- Ignore unexpected messages  -->
    </step>


<!-- SMS SERVER -->
<!-- ********** -->

    <step id="35001" type="intercept">
        <name>Analyze SMS_RESOURCE_CONF_REQ, Not Activated</name>
        <channel id="0x07"/>
        <output-ref id="35001"/>
    </step>

    <step id="35002" type="intercept">
        <name>Analyze SMS_RESOURCE_CONF_REQ, Activated</name>
        <channel id="0x07"/>
        <output-ref id="35002"/>
    </step>
    
    <step id="35003" type="intercept">
        <name>Analyze SMS_RESOURCE_REQ, Allowed</name>
        <channel id="0x07"/>
        <output-ref id="35003"/>
    </step>

    <step id="35004" type="intercept">
        <name>Analyze SMS_RESOURCE_REQ, Not Allowed</name>
        <channel id="0x07"/>
        <output-ref id="35004"/>
    </step>

    <step id="35005" type="intercept">
        <name>Analyze SMS_RESOURCE_REQ, Allowed with modification</name>
        <channel id="0x07"/>
        <output-ref id="35005"/>
    </step>


<!-- SIM SERVER -->
<!-- ********** -->

    <step id="45001" type="intercept">
        <name>Analyze SIM_READ_TABLE_REQ, MO SMS Control</name>
        <channel id="0x07"/>
        <output-ref id="45001"/>
    </step>

    <step id="46001" type="intercept">
        <name>Analyze ATK_ENVELOPE_NTF, MO SMS Control</name>
        <channel id="0x07"/>
        <output-ref id="46001"/>
        <flags>0x40</flags>
        <flags>0x01</flags> <!-- Ignore unexpected messages  -->
    </step>

    <step id="46002" type="intercept">
        <name>Analyze ATK_ENVELOPE_NTF, MO SMS Control, extented cell id</name>
        <channel id="0x07"/>
        <output-ref id="46002"/>
        <flags>0x40</flags>
        <flags>0x01</flags> <!-- Ignore unexpected messages  -->
    </step>


<!-- GENERAL STEPS -->
<!-- ************* -->

    <step id="90001" type="sync">
        <name>Sync with test env</name>
    </step>

    <step id="90004" type="simulate">
        <name>SIM session end</name>
        <channel id="0x07"/>
        <input-ref id="90004"/>
        <flags>0x40</flags>  <!-- Use stored transaction ID in simulated message -->        
    </step>

 </steps>


<!-- ********** -->
<!-- TEST CASES -->
<!-- ********** -->

<cases>
    <case id="101">
        <name>MO SMS Control - out of network coverage</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="30007"/> <!-- simulate SMS_RESOURCE_CONF_IND, in order to give start up condition -->
            <step-ref id="40001"/> <!-- Simulate SIM_READ_TABLE_RESP, in order to activate MO SMS control service in SIM_ATK_TSY-->
            <step-ref id="35002"/> <!-- Analyze SMS_RESOURCE_CONF_REQ -->
            <step-ref id="30001"/> <!-- Simulate SMS_SM_CONTROL_ACTIVATE_RESP -->
            <step-ref id="50001"/> <!-- Simulate NET_CELL_INFO_IND, NET_LIMITED_SERVICE -->
            <step-ref id="30005"/> <!-- Simulate SMS_RESOURCE_IND -->
            <step-ref id="35003"/> <!-- Analyze SMS_RESOURCE_REQ -->
            <step-ref id="30006"/> <!-- Simulate SMS_RESOURCE_RESP -->
        </test-steps>
    </case>

    <case id="102">
        <name>MO SMS Control - Long Alpha ID (User originated) </name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="30007"/> <!-- simulate SMS_RESOURCE_CONF_IND, in order to give start up condition -->
            <step-ref id="40001"/> <!-- Simulate SIM_READ_TABLE_RESP, in order to activate MO SMS control service in SIM_ATK_TSY-->
            <step-ref id="35002"/> <!-- Analyze SMS_RESOURCE_CONF_REQ -->
            <step-ref id="30001"/> <!-- Simulate SMS_RESOURCE_CONF_RESP -->
            <step-ref id="50002"/> <!-- Simulate NET_CELL_INFO_IND -->
            <step-ref id="30005"/> <!-- Simulate SMS_RESOURCE_IND -->
            <step-ref id="46001"/> <!-- Analyze Content of envelope -->
            <step-ref id="20006"/> <!-- Simulate ATK_DATA_NTF, Allowed + Long Alpha ID -->
            <step-ref id="35003"/> <!-- Analyze SMS_RESOURCE_REQ -->
            <step-ref id="30006"/> <!-- Simulate SMS_RESOURCE_RESP -->
        </test-steps>
    </case>

    <case id="103">
        <name>MO SMS Control - Based on GCF case 27.22.8, Seq1.1, using extented cell id </name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="40002"/> <!-- Simulate SIM_ICC_TYPE_RESP; SIM_3G -->
            <step-ref id="50004"/> <!-- Simulate NET_RAT_IND; NET_RAT_UMTS -->
            <step-ref id="30007"/> <!-- simulate SMS_RESOURCE_CONF_IND, in order to give start up condition -->
            <step-ref id="40001"/> <!-- Simulate SIM_READ_TABLE_RESP, in order to activate MO SMS control service in SIM_ATK_TSY-->
            <step-ref id="35002"/> <!-- Analyze SMS_RESOURCE_CONF_REQ -->
            <step-ref id="30001"/> <!-- Simulate SMS_RESOURCE_CONF_RESP -->
            <step-ref id="50003"/> <!-- Simulate NET_CELL_INFO_IND -->
            <step-ref id="10001"/> <!-- Simulate Send SMS proactive command -->
            <step-ref id="30005"/> <!-- Simulate SMS_RESOURCE_IND -->
            <step-ref id="46002"/> <!-- Analyze Content of envelope -->
            <step-ref id="20002"/> <!-- Simulate ATK_DATA_NTF, response to envelope -->
            <step-ref id="35003"/> <!-- Analyze SMS_RESOURCE_REQ -->
            <step-ref id="30006"/> <!-- Simulate SMS_RESOURCE_RESP -->
            <step-ref id="30002"/> <!-- Simulate SMS_MESSAGE_SEND_RESP, OK -->
            <step-ref id="15000"/> <!-- Analyze content of terminal response -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->
        </test-steps>
    </case>

    <case id="104">
        <name>MO SMS Control - Based on GCF case 27.22.8, Seq1.3, using extented cell id  </name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="40002"/> <!-- Simulate SIM_ICC_TYPE_RESP; SIM_3G -->
            <step-ref id="50004"/> <!-- Simulate NET_RAT_IND; NET_RAT_UMTS -->
            <step-ref id="30007"/> <!-- simulate SMS_RESOURCE_CONF_IND, in order to give start up condition -->
            <step-ref id="40001"/> <!-- Simulate SIM_READ_TABLE_RESP, in order to activate MO SMS control service in SIM_ATK_TSY-->
            <step-ref id="35002"/> <!-- Analyze SMS_RESOURCE_COMF_REQ -->
            <step-ref id="30001"/> <!-- Simulate SMS_RESOURCE_COMF_RESP -->
            <step-ref id="50003"/> <!-- Simulate NET_CELL_INFO_IND -->
            <step-ref id="10001"/> <!-- Simulate Send SMS proactive command -->
            <step-ref id="30005"/> <!-- Simulate SMS_RESOURCE_IND -->
            <step-ref id="46002"/> <!-- Analyze Content of envelope -->
            <step-ref id="20003"/> <!-- Simulate ATK_DATA_NTF, Not allowed -->
            <step-ref id="35004"/> <!-- Analyze SMS_RESOURCE_REQ -->
            <step-ref id="30006"/> <!-- Analyze SMS_RESOURCE_RESP-->
            <step-ref id="30003"/> <!-- Simulate SMS_MESSAGE_SEND_RESP, rejected -->
            <step-ref id="15001"/> <!-- Analyze content of terminal response -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->
        </test-steps>
    </case>

    <case id="105">
        <name>MO SMS Control - Based on GCF case 27.22.8, Seq1.5, using extented cell id  </name>
        <timeout>10</timeout>
        <test-steps>
	    <step-ref id="40002"/> <!-- Simulate SIM_ICC_TYPE_RESP; SIM_3G -->
            <step-ref id="50004"/> <!-- Simulate NET_RAT_IND; NET_RAT_UMTS -->
            <step-ref id="30007"/> <!-- Simulate SMS_RESOURCE_CONF_IND, in order to give start up condition -->
            <step-ref id="40001"/> <!-- Simulate SIM_READ_TABLE_RESP, in order to activate MO SMS control service in SIM_ATK_TSY-->
            <step-ref id="35002"/> <!-- Analyze SMS_RESOURCE_COMF_REQ -->
            <step-ref id="30001"/> <!-- Simulate SMS_RESOURCE_COMF_RESP -->
            <step-ref id="50003"/> <!-- Simulate NET_CELL_INFO_IND -->
            <step-ref id="10001"/> <!-- Simulate Send SMS proactive command -->
            <step-ref id="30005"/> <!-- Simulate SMS_RESOURCE_IND -->
            <step-ref id="46002"/> <!-- Analyze Content of envelope -->
            <step-ref id="20004"/> <!-- Simulate ATK_DATA_NTF, Allowed with modifications -->
            <step-ref id="35005"/> <!-- Analyze SMS_RESOURCE_REQ, Allowed  -->
            <step-ref id="30006"/> <!-- Analyze SMS_RESOURCE_RESP-->
            <step-ref id="30004"/> <!-- Simulate SMS_MESSAGE_SEND_RESP, Allowed with modifications -->
            <step-ref id="15000"/> <!-- Analyze content of terminal response -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->
        </test-steps>
    </case>

    <case id="106">
        <name>MO SMS Control - Based on GCF case 27.22.8, Seq1.7, using extented cell id  </name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="40002"/> <!-- Simulate SIM_ICC_TYPE_RESP; SIM_3G -->
            <step-ref id="50004"/> <!-- Simulate NET_RAT_IND; NET_RAT_UMTS -->
            <step-ref id="30007"/> <!-- Simulate SMS_RESOURCE_CONF_IND, in order to give start up condition -->
            <step-ref id="40001"/> <!-- Simulate SIM_READ_TABLE_RESP, in order to activate MO SMS control service in SIM_ATK_TSY-->
            <step-ref id="35002"/> <!-- Analyze SMS_RESOURCE_CONF_REQ -->
            <step-ref id="30001"/> <!-- Simulate SMS_RESOURCE_CONF_RESP -->
            <step-ref id="50003"/> <!-- Simulate NET_CELL_INFO_IND -->
            <step-ref id="10001"/> <!-- Simulate Send SMS proactive command -->
            <step-ref id="30005"/> <!-- Simulate SMS_RESOURCE_IND -->
            <step-ref id="46002"/> <!-- Analyze Content of envelope -->
            <step-ref id="20005"/> <!-- Simulate ATK_DATA_NTF, Allowed "90 00" -->
            <step-ref id="35003"/> <!-- Analyze SMS_RESOURCE_REQ, Alowed -->
            <step-ref id="30006"/> <!-- Analyze SMS_RESOURCE_RESP-->
            <step-ref id="30002"/> <!-- Simulate SMS_MESSAGE_SEND_RESP, SMS OK -->
            <step-ref id="15000"/> <!-- Analyze content of terminal response -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->
        </test-steps>
    </case>

</cases>

</isc-test-control>
