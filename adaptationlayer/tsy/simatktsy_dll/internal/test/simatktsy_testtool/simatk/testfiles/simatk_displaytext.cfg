//* Copyright (c) 2009 Nokia Corporation and/or its subsidiary(-ies).
//* All rights reserved.
//* This component and the accompanying materials are made available
//* under the terms of the License "Eclipse Public License v1.0"
//* which accompanies this distribution, and is available
//* at the URL "http://www.eclipse.org/legal/epl-v10.html".
//*
//* Initial Contributors:
//* Nokia Corporation - initial contribution.
//*
//* Contributors:
//*
//* Description:  

//
// Precondition: 
// - Detailed description can be found from Quality Center's Project: CoreSW_CASW/Module Tests/SIM ATK TSY/SimAtkTSY_testtool
//
// Script description:
//

// Proactive command //
///////////////////////

// Priority (Default 1, Normal)
//  0 NotSet
//  1 Normal
//  2 High

// ClearScreenTrigger (Default 2, UserClear)
//  0 NotSet
//  1 AfterDelay
//  2 UserClear

// Text
//  Enter the text inside the quotes or as unicode hex digits. Example: Text "abc" or Text 61 62 63

// Duration
//  TimeUnit, unit used to encode the duration
//      0 TimeUnitNotSet. Initialization value used within constructor(s).
//      1 No duration has been provided. The ME should default to general beep.
//      2 The duration is expressed in minutes.
//      3 The duration is expressed in seconds.
//      4 The duration is expressed in tenths of seconds.
//  NumOfUnits
//     Valid range is 1 to 255
//  Example 10 minutes: Duration 2 10

// IconId
//  IconQualifier
//      0 NotSet
//      1 NoIconId
//      2 SelfExplanatory
//      3 NotSelfExplanatory
//  IconIdentifier
//      Id number
//  Example SelfExplanatory ID 5: IconId 2 5

// ImmediateRsp (Default 2, NoImmediateRsp)
//      0 NotSet
//      1 ImmediateRsp
//      2 NoImmediateRsp


// Terminal Response //
///////////////////////

// GeneralResult
//  General result of the proactive command. Default command performed successfully.

// AdditionalInfo
//  Enter the text inside the quotes or as unicode hex digits

// InfoType
// If the value of iGeneralResult requires additional information,
// set this to MeProblem (2).  Otherwise set to
// NoAdditionalInfo (1). Default no additional info.


[Test]
title MOD_0002.001_SIM_ATK_TSY_[DISPLAY TEXT - normal]

create SimAtk simatk
create SimAtkNotify notify

// open all
simatk Connect RTelServer
simatk Load PhoneTsy.tsy
simatk Open DefaultPhone
simatk Open SAT
simatk Open IscControl

// Load ISC XML -file
simatk LoadIscTests SimAtk_DisplayText.xml

// SEQ 1.1
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 101
waittestclass notify
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 2 Text "Toolkit Test 1" ImmediateRsp 2
simatk SendTerminalResponse
simatk WaitForRequest

// SEQ 1.2
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 102
waittestclass notify
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 2 Text "Toolkit Test 1" ImmediateRsp 2
simatk SendTerminalResponse GeneralResult MeUnableToProcessCmd InfoType MeProblem AdditionalInfo ScreenBusy
simatk WaitForRequest

// SEQ1.3
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 103
waittestclass notify
simatk CheckProactiveCommand Priority 2 ClearScreenTrigger 2 Text "Toolkit Test 2" ImmediateRsp 2
simatk SendTerminalResponse
simatk WaitForRequest

// SEQ1.4
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 104
waittestclass notify
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 2 Text "Toolkit Test 3" ImmediateRsp 2
simatk SendTerminalResponse
simatk WaitForRequest

// SEQ1.5
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 105
waittestclass notify
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 1 Text "Toolkit Test 4" ImmediateRsp 2
simatk SendTerminalResponse
simatk WaitForRequest

// SEQ1.6
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 106
waittestclass notify
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 2 ImmediateRsp 2 Text "This command instructs the ME to display a text message. It allows the SIM to define the priority of that message, and the text string format. Two types of prio"
simatk SendTerminalResponse
simatk WaitForRequest

// SEQ1.7
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 107
waittestclass notify
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 2 Text "<GO-BACKWARDS>" ImmediateRsp 2
simatk SendTerminalResponse GeneralResult BackwardModeRequestedByUser
simatk WaitForRequest

// SEQ1.8
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 108
waittestclass notify
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 2 Text "<ABORT>" ImmediateRsp 2
simatk SendTerminalResponse GeneralResult SessionTerminatedByUser
simatk WaitForRequest

// SEQ1.9
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 109
allownextresult -20
waittestclass notify
simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete simatk
delete notify
[Endtest]

[Test]
title MOD_0002.002_SIM_ATK_TSY_[DISPLAY TEXT - Support of "No response from user"]

create SimAtk simatk
create SimAtkNotify notify

// open all
simatk Connect RTelServer
simatk Load PhoneTsy.tsy
simatk Open DefaultPhone
simatk Open SAT
simatk Open IscControl

// Load ISC XML -file
simatk LoadIscTests SimAtk_DisplayText.xml

// SEQ 2.1
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 201
waittestclass notify
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 2 Text "<TIME-OUT>" ImmediateRsp 2
simatk SendTerminalResponse GeneralResult NoResponseFromUser
simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete simatk
delete notify
[Endtest]

[Test]
title MOD_0002.003_SIM_ATK_TSY_[DISPLAY TEXT - Display of extension text]

create SimAtk simatk
create SimAtkNotify notify

// open all
simatk Connect RTelServer
simatk Load PhoneTsy.tsy
simatk Open DefaultPhone
simatk Open SAT
simatk Open IscControl

// Load ISC XML -file
simatk LoadIscTests SimAtk_DisplayText.xml

// SEQ 3.1
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 301
waittestclass notify
// Text string in test case description (3GPP TS 51.010-4 V4.2.0) does not match the text string in proactive command. The same string is used here as in Pcmd. 
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 2 Text "This command instructs the ME to display a text message, and/or an icon (see 6.5.4). It allows the SIM to define the priority of that message, and the text string format. Two types of priority are defined:- display normal priority text and/" ImmediateRsp 2
simatk SendTerminalResponse
simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete simatk
delete notify
[Endtest]

[Test]
title MOD_0002.004_SIM_ATK_TSY_[DISPLAY TEXT - Sustained text]

create SimAtk simatk
create SimAtkNotify notify

// open all
simatk Connect RTelServer
simatk Load PhoneTsy.tsy
simatk Open DefaultPhone
simatk Open SAT
simatk Open IscControl

// Load ISC XML -file
simatk LoadIscTests SimAtk_DisplayText.xml

// SEQ 4.1
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 401
waittestclass notify
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 2 Text "Toolkit Test 1" ImmediateRsp 1
simatk SendTerminalResponse
simatk WaitForRequest

// SEQ 4.2
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 402
waittestclass notify
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 1 Text "Toolkit Test 2" ImmediateRsp 1
simatk SendTerminalResponse
simatk WaitForRequest

// SEQ 4.3
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 403
waittestclass notify
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 2 Text "Toolkit Test 3" ImmediateRsp 1
simatk SendTerminalResponse
simatk WaitForRequest

// SEQ 4.4
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 404
waittestclass notify
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 2 Text "Toolkit Test 4" ImmediateRsp 1
simatk SendTerminalResponse
simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete simatk
delete notify
[Endtest]

[Test]
title MOD_0002.005_SIM_ATK_TSY_[DISPLAY TEXT - Display of icons (Sequence B)]

create SimAtk simatk
create SimAtkNotify notify

// open all
simatk Connect RTelServer
simatk Load PhoneTsy.tsy
simatk Open DefaultPhone
simatk Open SAT
simatk Open IscControl

// Load ISC XML -file
simatk LoadIscTests SimAtk_DisplayText.xml

// SEQ 5.1B
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 501
waittestclass notify
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 2 Text "Basic Icon" IconId 2 1 ImmediateRsp 2
simatk SendTerminalResponse GeneralResult SuccessRequestedIconNotDisplayed
simatk WaitForRequest

// SEQ 5.2B
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 502
waittestclass notify
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 2 Text "Colour Icon" IconId 2 2 ImmediateRsp 2
simatk SendTerminalResponse GeneralResult SuccessRequestedIconNotDisplayed
simatk WaitForRequest

// SEQ 5.3B
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 503
waittestclass notify
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 2 Text "Basic Icon" IconId 3 1 ImmediateRsp 2
simatk SendTerminalResponse GeneralResult SuccessRequestedIconNotDisplayed
simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete simatk
delete notify
[Endtest]

[Test]
title MOD_0002.006_SIM_ATK_TSY_[DISPLAY TEXT - UCS2 display supported]

create SimAtk simatk
create SimAtkNotify notify

// open all
simatk Connect RTelServer
simatk Load PhoneTsy.tsy
simatk Open DefaultPhone
simatk Open SAT
simatk Open IscControl

// Load ISC XML -file
simatk LoadIscTests SimAtk_DisplayText.xml

// SEQ 6.1
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 2 601
waittestclass notify
// Text in hexadecimal: "Hello" in Russia
simatk CheckProactiveCommand Priority 1 ClearScreenTrigger 2 Text 0417 0414 0420 0410 0412 0421 0422 0412 0423 0419 0422 0415 ImmediateRsp 2
simatk SendTerminalResponse
simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete simatk
delete notify
[Endtest]
