<?xml version="1.0" encoding="utf-8"?> 

<!-- MOD_0017.001_SIM_ATK_TSY_[SET UP EVENT LIST - normal] -->


<isc-test-control id="17">


<!-- ******** -->
<!-- CHANNELS -->
<!-- ******** -->
<channels>
	<channel id="0x07"/>
</channels>


<!-- ****** -->
<!-- INPUTS -->
<!-- ****** -->
<inputs>


<!-- PROACTIVE COMMANDS -->
<!-- ****************** -->

    <!-- USED BY: 27.22.4.16.1 -->
    <input id="10001">
        <name>PROACTIVE COMMAND: SET UP EVENT LIST 1.1.1, 1.3.1, 1.4.1</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,10,D0,0C,81,03,01,05,00,82,02,81,82,99,01,01,90,00</message>
    </input>

    <input id="10002">
        <name>PROACTIVE COMMAND: SET UP EVENT LIST 1.2.1</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,11,D0,0D,81,03,01,05,00,82,02,81,82,99,02,01,02,90,00</message>
    </input>
    
    <input id="10003">
        <name>PROACTIVE COMMAND: SET UP EVENT LIST 1.2.2</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,10,D0,0C,81,03,01,05,00,82,02,81,82,99,01,02,90,00</message>
    </input>
    
    <input id="10004">
        <name>PROACTIVE COMMAND: SET UP EVENT LIST 1.3.2</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,0F,D0,0B,81,03,01,05,00,82,02,81,82,99,00,90,00</message>
                                                           
    </input>
    
    
<!-- CALL SERVER -->
<!-- *********** -->

    <!-- USED BY: 27.22.4.16.1 -->
    <input id="30001">
        <name>CALL_STATUS_IND, CALL_STATUS_ANSWERED</name>
        <direction>sos</direction>
        <message>00,00,10,01,00,00,20,01,00,0f,00,03,0a,04,07,00,07,04,01,00,be,04,80,00</message>
    </input>
    
    <input id="30002">
        <name>CALL_STATUS_IND, CALL_STATUS_MT_RELEASE</name>
        <direction>sos</direction>
        <message>00,00,10,01,00,00,20,01,00,0f,00,04,0a,04,0a,00,07,04,01,00,be,04,00,02,bf,08,02,e0,90,00,00,00</message>
    </input>  
    
      
<!-- SIM SESSION END -->
<!-- *************** -->
    <input id="90004">
        <name>SIM Session End</name>
        <direction>sos</direction>
        <message>15,00,00,5A,00,00,78,34,00,13,00,00,90,00,00,00</message>
        <!-- Transaction Id's (9:th byte) must match with Terminal responses transaction id -->
    </input>

</inputs>


<!-- ******* -->
<!-- OUTPUTS -->
<!-- ******* -->
<outputs>


<!-- ENVELOPES -->
<!-- ********* -->

    <!-- USED BY: 27.22.4.16.1 -->
    <output id="60001">
        <name>ENVELOPE: EVENT DOWNLOAD CALL CONNECTED 1.1.1</name>
        <direction>dos</direction>
        <message>00,00,00,5A,00,12,00,00,C5,12,00,0C,D6,0A,99,01,01,82,02,82,81,9C,01,80</message>
           <mask>00,00,00,FF,00,FF,00,00,00,FF,FF,FF,FF,FF,7F,FF,FF,7F,FF,FF,FF,7F,FF,FF</mask>
    </output>
    
    <output id="60002">
        <name>ENVELOPE: EVENT DOWNLOAD CALL DISCONNECTED 1.2.2B</name>
        <direction>dos</direction>
        <message>00,00,00,5A,00,16,00,00,C5,12,00,10,D6,0E,99,01,02,82,02,83,81,9C,01,00,9A,02,E0,90</message>
           <mask>00,00,00,FF,00,FF,00,00,00,FF,FF,FF,FF,FF,7F,FF,FF,7F,FF,FF,FF,7F,FF,FF,7F,FF,FF,FF</mask>
    </output>
    
    
<!-- TERMINAL RESPONSES -->
<!-- ****************** -->

    <!-- USED BY: 27.22.4.16.1 -->
    <output id="40001">
        <name>TERMINAL RESPONSE: SET UP EVENT LIST 1.1.1, 1.2.1</name>
        <direction>dos</direction>
        <message>1D,00,10,5A,00,16,00,08,00,11,00,00,00,0C,81,03,01,05,00,82,02,82,81,83,01,00,00,00</message>
           <mask>00,00,00,FF,00,FF,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,7F,FF,FF,FF,FF</mask>
    </output>

</outputs>


<!-- ********** -->
<!-- TEST STEPS -->
<!-- ********** -->
<steps>


<!-- PROACTIVE COMMANDS -->
<!-- ****************** -->

<!-- USED BY: 27.22.4.16.1 -->
    <step id="10001" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10001"/>
    </step>
    
    <step id="10002" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10002"/>
    </step>
    
    <step id="10003" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10003"/>
    </step>
    
    <step id="10004" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10004"/>
    </step>
    
    
<!-- CALL SERVER -->
<!-- *********** -->

<!-- USED BY: 27.22.4.16.1 -->
    <step id="30001" type="simulate">
        <name>CALL_STATUS_IND</name>
        <channel id="0x07"/>
        <input-ref id="30001"/>
    </step> 

    <step id="30002" type="simulate">
        <name>CALL_STATUS_IND</name>
        <channel id="0x07"/>
        <input-ref id="30002"/>
    </step>
    
    
<!-- ENVELOPES -->
<!-- ********* -->

<!-- USED BY: 27.22.4.16.1 -->
    <step id="60001" type="intercept">
        <name>Intercept Envelope</name>
        <channel id="0x07"/>
        <output-ref id="60001"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>

    <step id="60002" type="intercept">
        <name>Intercept Envelope</name>
        <channel id="0x07"/>
        <output-ref id="60002"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>
    
    
<!-- TERMINAL RESPONSES -->
<!-- ****************** -->

<!-- USED BY: 27.22.4.16.1 -->
    <step id="40001" type="intercept">
        <name>Intercept TR</name>
        <channel id="0x07"/>
        <output-ref id="40001"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>


<!-- GENERAL STEPS -->
<!-- ************* -->

    <step id="90001" type="sync">
        <name>Sync with test env</name>
        <flags>1</flags>
    </step>

    <step id="90002" type="open-channel">
        <name>Attach to channel 7</name>
        <channel id="0x07"/>
    </step>

    <step id="90003" type="close-channel">
        <name>Detach from channel 7</name>
        <channel id="0x07"/>
    </step>

    <step id="90004" type="simulate">
        <name>SIM session end</name>
        <channel id="0x07"/>
        <input-ref id="90004"/>
        <flags>0x40</flags>  <!-- Use stored transaction ID in simulated message -->        
    </step>
    
    <step id="90005" type="sleep">
        <name>Sleep for one second</name>
        <timeout>1000</timeout>
        <block>false</block>
    </step>
    
    <step id="90006" type="sleep">
        <name>Sleep for one second, receive boot up messages</name>
        <timeout>1000</timeout>
        <block>false</block>
        <flags>1</flags>
    </step>    

</steps>


<!-- ********** -->
<!-- TEST CASES -->
<!-- ********** -->
<cases>

<!-- 27.22.4.16.1 SET UP EVENT LIST (normal) -->
    <case id="101">
        <name>Sequence 1.1 (SET UP EVENT LIST, Set Up Call Connect Event)</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->
            
            <step-ref id="10001"/> <!-- Send PCMD -->
            <step-ref id="40001"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SIM Session End -->
            
            <step-ref id="30001"/> <!-- CALL_STATUS_IND -->
            <step-ref id="60001"/> <!-- Receive Envelope -->
            <step-ref id="90004"/> <!-- SIM Session End -->
            
            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>
    
    <case id="102">
        <name>Sequence 1.2 (SET UP EVENT LIST, Replace Event)</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->
            
            <step-ref id="10002"/> <!-- Send PCMD -->
            <step-ref id="40001"/> <!-- Receive TR -->
            
            <step-ref id="90001"/> <!-- Synch -->
            
            <step-ref id="10003"/> <!-- Send PCMD -->
            <step-ref id="40001"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SIM Session End -->
            
            <step-ref id="30001"/> <!-- CALL_STATUS_IND, Call connected -->
            
            <step-ref id="90005"/> <!-- Sleep, no envelope should be received -->
            
            <step-ref id="30002"/> <!-- CALL_STATUS_IND, Call MT terminated -->
            <step-ref id="60002"/> <!-- Receive Envelope -->
            <step-ref id="90004"/> <!-- SIM Session End -->
            
            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>
    
    <case id="103">
        <name>Sequence 1.3 (SET UP EVENT LIST, Remove Event)</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->
            
            <step-ref id="10001"/> <!-- Send PCMD -->
            <step-ref id="40001"/> <!-- Receive TR -->
            
            <step-ref id="90001"/> <!-- Synch -->
            
            <step-ref id="10004"/> <!-- Send PCMD -->
            <step-ref id="40001"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SIM Session End -->
            
            <step-ref id="30001"/> <!-- CALL_STATUS_IND, Call connected -->            
            <step-ref id="90005"/> <!-- Sleep, no envelope should be received -->
            
            <step-ref id="30002"/> <!-- CALL_STATUS_IND, Call MT terminated -->            
            <step-ref id="90005"/> <!-- Sleep, no envelope should be received -->
            
            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>
    
    <case id="104">
        <name>Sequence 1.4 (SET UP EVENT LIST, Remove Event on ME Power Cycle)</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->
            
            <step-ref id="10001"/> <!-- Send PCMD -->
            <step-ref id="40001"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SIM Session End -->
            
            <step-ref id="90001"/> <!-- Synch -->
            <step-ref id="90006"/> <!-- Sleep, filter out boot-up messages -->
            
            <step-ref id="30001"/> <!-- CALL_STATUS_IND, Call connected -->            
            <step-ref id="90005"/> <!-- Sleep, no envelope should be received -->
            
            <step-ref id="30002"/> <!-- CALL_STATUS_IND, Call MT terminated -->            
            <step-ref id="90005"/> <!-- Sleep, no envelope should be received -->
            
            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>
    
    
    
</cases>

</isc-test-control>
