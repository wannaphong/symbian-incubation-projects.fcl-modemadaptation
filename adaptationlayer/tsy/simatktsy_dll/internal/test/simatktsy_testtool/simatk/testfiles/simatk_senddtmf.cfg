//* Copyright (c) 2009 Nokia Corporation and/or its subsidiary(-ies).
//* All rights reserved.
//* This component and the accompanying materials are made available
//* under the terms of the License "Eclipse Public License v1.0"
//* which accompanies this distribution, and is available
//* at the URL "http://www.eclipse.org/legal/epl-v10.html".
//*
//* Initial Contributors:
//* Nokia Corporation - initial contribution.
//*
//* Contributors:
//*
//* Description:  
//
// Precondition: 
// - Detailed description can be found from Quality Center's Project: CoreSW_CASW/Module Tests/SIM ATK TSY/SimAtkTSY_testtool
//
// Script description:


// Proactive command //
///////////////////////

// AlphaId (Optional, default = AlphaIdNotPresent)
//  Enter the text inside the quotes or as unicode hex digits. Example: AlphaId "abc" or AlphaId 61 62 63

// IconId (Optional, default = IconId 0 0)
//  IconQualifier
//      0 NotSet
//      1 NoIconId
//      2 SelfExplanatory
//      3 NotSelfExplanatory
//  IconIdentifier
//      Id number
//  Example SelfExplanatory ID 5: IconId 2 5

// Dtmf (= mandatory)
//  Enter the TDMF as hex digits. Example 1234: Dtmf 21 43

// TextAttribute (Optional, default = 0, not initialized)
//	TA contains information how the text related to a command should be presented to a user. Status of TA 
//  can be either not initialized, not provided or present. TA coding is specified in ETSI TS 123 040.
// If TA is provided by the script, it is presumed that is should be provided also by the command.
// Example TA provided: TextAttribute AA BB CC DD


// Terminal Response //
///////////////////////

// GeneralResult (Optional, default = KSuccess )
//  General result of the proactive command. Default command performed successfully.

// AdditionalInfo (Optional, default = "")
//  Contains additional information associated with certain error codes set in GeneralResult.
//  If the value in GeneralResult does not require any information then leave this field empty.
        
// InfoType (Optional, default = KNoAdditionalInfo )
//  If the value of iGeneralResult requires additional information, set this to KMeProblem. 
//  Otherwise set to KNoAdditionalInfo


[Test]
title MOD_0021.001_SIM_ATK_TSY_[SEND DTMF - Normal]

create SimAtk simatk
create SimAtkNotify sendDtmf

// open all
simatk Connect RTelServer
simatk Load PhoneTsy.tsy
simatk Open DefaultPhone
simatk Open SAT
simatk Open IscControl

// Load ISC XML -file
simatk LoadIscTests SimAtk_SendDtmf.xml


// Sequence 1.1 (SEND DTMF, normal)
//
sendDtmf UseObjectAddress simatk ESatNotifySendDtmfPCmd
simatk RunIscTestCase 21 101
waittestclass sendDtmf
// DTMF: 1 pause 2
simatk CheckProactiveCommand Dtmf C1 F2
simatk SendTerminalResponse
simatk WaitForRequest

// Sequence 1.2 (SEND DTMF, containing alpha identifier)
//
sendDtmf UseObjectAddress simatk ESatNotifySendDtmfPCmd
simatk RunIscTestCase 21 102
waittestclass sendDtmf
// DTMF: 1 2 3 4 5 6 7 8 9 0
simatk CheckProactiveCommand AlphaId "Send DTMF" Dtmf 21 43 65 87 09
simatk SendTerminalResponse
simatk WaitForRequest

// Sequence 1.3 (SEND DTMF, containing alpha identifier with null data object)
//
sendDtmf UseObjectAddress simatk ESatNotifySendDtmfPCmd
simatk RunIscTestCase 21 103
waittestclass sendDtmf
// DTMF: 1 pause pause pause pause pause pause pause pause pause pause 2
simatk CheckProactiveCommand AlphaId "" Dtmf C1 CC CC CC CC 2C
simatk SendTerminalResponse
simatk WaitForRequest

// Sequence 1.4 (SEND DTMF, mobile is not in a speech call)
//
sendDtmf UseObjectAddress simatk ESatNotifySendDtmfPCmd
simatk RunIscTestCase 21 104
waittestclass sendDtmf
// DTMF: 1 pause 2
simatk CheckProactiveCommand Dtmf C1 F2
simatk SendTerminalResponse GeneralResult MeUnableToProcessCmd InfoType MeProblem AdditionalInfo NotInSpeechCall
simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete sendData
delete openChannel
delete simatk
[Endtest]

[Test]
title MOD_0021.002_SIM_ATK_TSY_[SEND DTMF - Display of icons]

create SimAtk simatk
create SimAtkNotify sendDtmf

// open all
simatk Connect RTelServer
simatk Load PhoneTsy.tsy
simatk Open DefaultPhone
simatk Open SAT
simatk Open IscControl

// Load ISC XML -file
simatk LoadIscTests SimAtk_SendDtmf.xml

// Sequence 2.1A (SEND DTMF, BASIC ICON self explanatory, successful)
sendDtmf UseObjectAddress simatk ESatNotifySendDtmfPCmd
simatk RunIscTestCase 21 2011
waittestclass sendDtmf
// DTMF: 1 pause 2
simatk CheckProactiveCommand AlphaId "Basic Icon" Dtmf C1 F2 IconId 2 1
simatk SendTerminalResponse
simatk WaitForRequest

// Sequence 2.1B (SEND DTMF, BASIC ICON self explanatory, requested icon could not be displayed)
//
sendDtmf UseObjectAddress simatk ESatNotifySendDtmfPCmd
simatk RunIscTestCase 21 2012
waittestclass sendDtmf
// DTMF: 1 pause 2
simatk CheckProactiveCommand AlphaId "Basic Icon" Dtmf C1 F2 IconId 2 1
simatk SendTerminalResponse GeneralResult SuccessRequestedIconNotDisplayed
simatk WaitForRequest


// Sequence 2.2A (SEND DTMF, COLOUR-ICON self explanatory, successful)
sendDtmf UseObjectAddress simatk ESatNotifySendDtmfPCmd
simatk RunIscTestCase 21 2021
waittestclass sendDtmf
// DTMF: 1 pause 2
simatk CheckProactiveCommand AlphaId "Colour Icon" Dtmf C1 F2 IconId 2 2
simatk SendTerminalResponse
simatk WaitForRequest

// Sequence 2.2B (SEND DTMF, COLOUR-ICON self explanatory, requested icon could not be displayed)
sendDtmf UseObjectAddress simatk ESatNotifySendDtmfPCmd
simatk RunIscTestCase 21 2022
waittestclass sendDtmf
// DTMF: 1 pause 2
simatk CheckProactiveCommand AlphaId "Colour Icon" Dtmf C1 F2 IconId 2 2
simatk SendTerminalResponse GeneralResult SuccessRequestedIconNotDisplayed
simatk WaitForRequest


// Sequence 2.3A (SEND DTMF, Alpha identifier & BASIC-ICON, not self-explanatory, successful)
sendDtmf UseObjectAddress simatk ESatNotifySendDtmfPCmd
simatk RunIscTestCase 21 2031
waittestclass sendDtmf
// DTMF: 1 pause 2
simatk CheckProactiveCommand AlphaId "Send DTMF" Dtmf C1 F2 IconId 3 1
simatk SendTerminalResponse
simatk WaitForRequest

// Sequence 2.3B (SEND DTMF, Alpha identifier & BASIC-ICON, not self-explanatory, requested icon could not be displayed)
sendDtmf UseObjectAddress simatk ESatNotifySendDtmfPCmd
simatk RunIscTestCase 21 2032
waittestclass sendDtmf
// DTMF: 1 pause 2
simatk CheckProactiveCommand AlphaId "Send DTMF" Dtmf C1 F2 IconId 3 1
simatk SendTerminalResponse GeneralResult SuccessRequestedIconNotDisplayed
simatk WaitForRequest


// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete sendData
delete openChannel
delete simatk
[Endtest]

[Test]
title MOD_0021.003_SIM_ATK_TSY_[SEND DTMF - UCS2 support]

create SimAtk simatk
create SimAtkNotify sendDtmf

// open all
simatk Connect RTelServer
simatk Load PhoneTsy.tsy
simatk Open DefaultPhone
simatk Open SAT
simatk Open IscControl

// Load ISC XML -file
simatk LoadIscTests SimAtk_SendDtmf.xml

// Sequence 3.1 (SEND DTMF, successful, UCS2 text)
sendDtmf UseObjectAddress simatk ESatNotifySendDtmfPCmd
simatk RunIscTestCase 21 301
waittestclass sendDtmf
// AlphaID: 'Hello' in Russian. DTMF: 1 pause 2
simatk CheckProactiveCommand Dtmf C1 F2 AlphaId 0417 0414 0420 0410 0412 0421 0422 0412 0423 0419 0422 0415
simatk SendTerminalResponse
simatk WaitForRequest


// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete sendData
delete openChannel
delete simatk
[Endtest]

