//* Copyright (c) 2009 Nokia Corporation and/or its subsidiary(-ies).
//* All rights reserved.
//* This component and the accompanying materials are made available
//* under the terms of the License "Eclipse Public License v1.0"
//* which accompanies this distribution, and is available
//* at the URL "http://www.eclipse.org/legal/epl-v10.html".
//*
//* Initial Contributors:
//* Nokia Corporation - initial contribution.
//*
//* Contributors:
//*
//* Description:  

//
// Precondition: 
// - Detailed description can be found from Quality Center's Project: CoreSW_CASW/Module Tests/SIM ATK TSY/SimAtkTSY_testtool
//
// Script description:
//

// CC Result //
///////////////

// ControlResult
//  0 EControlResultNotSet, Initialization value used within constructor(s)
//  1 EAllowedNoModification
//  2 ENotAllowed
//  3 EAllowedWithModifications

// AlphaIdValidity
//  0 EAlphaIdValidityNotSet, Value used with constructor
//  1 EValidAlpaId
//  2 ENullAlphaId, Display nothing
//  3 ENoAlphaId

// AlphaId
//  Enter the text inside the quotes or as unicode hex digits. Example: Text "abc" or Text 61 62 63


//--------------------------------------//
// "ALLOWED" CASES						//
//--------------------------------------//

[Test]
title MOD_1001.001_SIM_ATK_TSY_[CALL CONTROL GPRS - Allowed, no modifications]

create SimAtk simatk
create SimAtkNotify notifyCallControl

simatk Connect RTelServer
simatk Load PhoneTsy.tsy
simatk Open DefaultPhone
simatk Open SAT
simatk Open IscControl

simatk LoadIscTests SimAtk_CallControl_GPRS_custom.xml

// Initialize
simatk RunIscTestCase 1001 001
simatk WaitForRequest

simatk RunIscTestCase 1001 101
simatk WaitForRequest

simatk RunIscTestCase 1001 102
simatk WaitForRequest

simatk RunIscTestCase 1001 103
simatk WaitForRequest

notifyCallControl UseObjectAddress simatk ESatNotifyCallControlRequest
simatk RunIscTestCase 1001 104
waittestclass notifyCallControl
simatk CheckProactiveCommand CommandType ESatNotifyCallControlRequest Type 4 ActionOriginator 2 ControlResult 1 AlphaId "CC on GPRS" AlphaIdValidity 1 AlphaIdStatus 1
simatk SyncIscTestCase
simatk WaitForRequest

notifyCallControl UseObjectAddress simatk ESatNotifyCallControlRequest
simatk RunIscTestCase 1001 105
waittestclass notifyCallControl
simatk CheckProactiveCommand CommandType ESatNotifyCallControlRequest Type 4 ActionOriginator 2 ControlResult 1 AlphaId "Call control gives the following response containing this very looong alpha identifier though this may be truncated by the mobile equipment!! The length is 160." AlphaIdValidity 1 AlphaIdStatus 1
simatk SyncIscTestCase
simatk WaitForRequest

notifyCallControl UseObjectAddress simatk ESatNotifyCallControlRequest
simatk RunIscTestCase 1001 106
waittestclass notifyCallControl
simatk CheckProactiveCommand CommandType ESatNotifyCallControlRequest Type 4 ActionOriginator 2 ControlResult 1 AlphaIdValidity 1 AlphaIdStatus 1 AlphaId 03B1 03B2 03B3 0020 03C9
simatk SyncIscTestCase
simatk WaitForRequest

simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete notifyCallControl
delete simatk
[Endtest]

//--------------------------------------//
// "NOT ALLOWED" CASES					//
//--------------------------------------//

[Test]
title MOD_1001.002_SIM_ATK_TSY_[CALL CONTROL GPRS - Not Allowed]

create SimAtk simatk
create SimAtkNotify notifyCallControl

simatk Connect RTelServer
simatk Load PhoneTsy.tsy
simatk Open DefaultPhone
simatk Open SAT
simatk Open IscControl

simatk LoadIscTests SimAtk_CallControl_GPRS_custom.xml

// Initialize
simatk RunIscTestCase 1001 001
simatk WaitForRequest

simatk RunIscTestCase 1001 110
simatk WaitForRequest

simatk RunIscTestCase 1001 111
simatk WaitForRequest

simatk RunIscTestCase 1001 112
simatk WaitForRequest

notifyCallControl UseObjectAddress simatk ESatNotifyCallControlRequest
simatk RunIscTestCase 1001 113
waittestclass notifyCallControl
simatk CheckProactiveCommand CommandType ESatNotifyCallControlRequest Type 4 ActionOriginator 2 ControlResult 2 AlphaId "CC on GPRS" AlphaIdValidity 1 AlphaIdStatus 1
simatk SyncIscTestCase
simatk WaitForRequest

simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete notifyCallControl
delete simatk
[Endtest]

//--------------------------------------//
// "ALLOWED WITH MODIFICATIONS" CASES	//
//--------------------------------------//

[Test]
title MOD_1001.003_SIM_ATK_TSY_[CALL CONTROL GPRS - Allowed with Modifications]

create SimAtk simatk
create SimAtkNotify notifyCallControl

simatk Connect RTelServer
simatk Load PhoneTsy.tsy
simatk Open DefaultPhone
simatk Open SAT
simatk Open IscControl

simatk LoadIscTests SimAtk_CallControl_GPRS_custom.xml

// Initialize
simatk RunIscTestCase 1001 001
simatk WaitForRequest

simatk RunIscTestCase 1001 120
simatk WaitForRequest

simatk RunIscTestCase 1001 121
simatk WaitForRequest

notifyCallControl UseObjectAddress simatk ESatNotifyCallControlRequest
simatk RunIscTestCase 1001 122
waittestclass notifyCallControl
simatk CheckProactiveCommand CommandType ESatNotifyCallControlRequest Type 4 ActionOriginator 2 ControlResult 1 AlphaId "CC on GPRS" AlphaIdValidity 1 AlphaIdStatus 1 
simatk SyncIscTestCase
simatk WaitForRequest

notifyCallControl UseObjectAddress simatk ESatNotifyCallControlRequest
simatk RunIscTestCase 1001 123
waittestclass notifyCallControl
simatk CheckProactiveCommand CommandType ESatNotifyCallControlRequest Type 4 ActionOriginator 2 ControlResult 3 AlphaId "CC on GPRS" AlphaIdValidity 1 AlphaIdStatus 1 
simatk SyncIscTestCase
simatk WaitForRequest

simatk RunIscTestCase 1001 124
simatk WaitForRequest

simatk RunIscTestCase 1001 125
simatk WaitForRequest

simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete notifyCallControl
delete simatk
[Endtest]
