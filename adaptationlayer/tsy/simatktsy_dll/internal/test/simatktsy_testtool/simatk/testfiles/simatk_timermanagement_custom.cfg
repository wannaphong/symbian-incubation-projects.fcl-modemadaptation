//* Copyright (c) 2009 Nokia Corporation and/or its subsidiary(-ies).
//* All rights reserved.
//* This component and the accompanying materials are made available
//* under the terms of the License "Eclipse Public License v1.0"
//* which accompanies this distribution, and is available
//* at the URL "http://www.eclipse.org/legal/epl-v10.html".
//*
//* Initial Contributors:
//* Nokia Corporation - initial contribution.
//*
//* Contributors:
//*
//* Description:  

// Precondition: 
// - Detailed description can be found from Quality Center's Project: CoreSW_CASW/Module Tests/SIM ATK TSY/SimAtkTSY_testtool
//
// Script description:
// - N/A

[Test]
title MOD_1008.001_SIM_ATK_TSY_[TIMER MANAGEMENT - 9.1.2.21.1 Single timer]

create SimAtk simatk
// connecting to ETel server
simatk Connect RTelServer
// Load TSY module
simatk Load PhoneTsy.tsy
// open phone module
simatk Open DefaultPhone
// Open SAT API
simatk Open SAT

// Open ISC Test control
simatk Open IscControl
// Load ISC XML -file
simatk LoadIscTests SimAtk_TimerManagement_custom.xml

// Subcase 1
simatk RunIscTestCase 1008 101
simatk WaitForRequest

// Subcase 2
simatk RunIscTestCase 1008 102
simatk WaitForRequest

// Subcase 3
simatk RunIscTestCase 1008 103
simatk WaitForRequest

// Subcase 4
simatk RunIscTestCase 1008 104
simatk WaitForRequest

// Subcase 5
simatk RunIscTestCase 1008 105
simatk WaitForRequest

// Subcase 6
simatk RunIscTestCase 1008 106
simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete simatk
[Endtest]

[Test]
title MOD_1008.002_SIM_ATK_TSY_[TIMER MANAGEMENT - 9.1.2.21.2 Multiple timers]

create SimAtk simatk

// connecting to ETel server
simatk Connect RTelServer
// Load TSY module
simatk Load PhoneTsy.tsy
// open phone module
simatk Open DefaultPhone
// Open SAT API
simatk Open SAT

// Open ISC Test control
simatk Open IscControl
// Load ISC XML -file
simatk LoadIscTests SimAtk_TimerManagement_custom.xml

// Subcase 1
simatk RunIscTestCase 1008 201
simatk WaitForRequest

// Subcase 2
simatk RunIscTestCase 1008 202
simatk WaitForRequest

// Subcase 3
simatk RunIscTestCase 1008 203
simatk WaitForRequest

// Subcase 4
simatk RunIscTestCase 1008 204
simatk WaitForRequest

// Subcase 5
simatk RunIscTestCase 1008 205
simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete simatk

[Endtest]

[Test]
title MOD_1008.003_SIM_ATK_TSY_[TIMER MANAGEMENT - 9.1.2.21.3 Refresh]

create SimAtk simatk
create SimAtkNotify refresh
create SimAtkNotify refreshRequired

// connecting to ETel server
simatk Connect RTelServer
// Load TSY module
simatk Load PhoneTsy.tsy
// open phone module
simatk Open DefaultPhone
// Open SAT API
simatk Open SAT

// Open ISC Test control
simatk Open IscControl
// Load ISC XML -file
simatk LoadIscTests SimAtk_TimerManagement_custom.xml

// Subcase 1
refresh UseObjectAddress simatk ESatNotifyRefreshPCmd
refreshRequired UseObjectAddress simatk ESatNotifyRefreshRequiredParam

simatk RunIscTestCase 1008 301
waittestclass refreshRequired
// SIM Initialisation and Full File Change Notification
simatk CheckProactiveCommand CommandType ESatNotifyRefreshRequiredParam RefreshType 1
// Send RefreshAllowed
simatk SendResponse CommandType ESatNotifyRefreshRequiredParam

waittestclass refresh
simatk CheckProactiveCommand CommandType ESatNotifyRefreshPCmd RefreshType 1
simatk SendTerminalResponse CommandType ESatNotifyRefreshPCmd

simatk WaitForRequest

// Subcase 2
refresh UseObjectAddress simatk ESatNotifyRefreshPCmd
refreshRequired UseObjectAddress simatk ESatNotifyRefreshRequiredParam

simatk RunIscTestCase 1008 302
waittestclass refreshRequired
// SIM Reset
simatk CheckProactiveCommand CommandType ESatNotifyRefreshRequiredParam RefreshType 5
// Send RefreshAllowed
simatk SendResponse CommandType ESatNotifyRefreshRequiredParam

waittestclass refresh
simatk CheckProactiveCommand CommandType ESatNotifyRefreshPCmd RefreshType 5
simatk SendTerminalResponse CommandType ESatNotifyRefreshPCmd

simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete refreshRequired
delete refresh
delete simatk
[Endtest]

[Test]
title MOD_1008.004_SIM_ATK_TSY_[TIMER MANAGEMENT - 9.1.2.21.4 When SIM Application Toolkit is busy]

create SimAtk simatk
create SimAtkNotify notify

// connecting to ETel server
simatk Connect RTelServer
// Load TSY module
simatk Load PhoneTsy.tsy
// open phone module
simatk Open DefaultPhone
// Open SAT API
simatk Open SAT

// Open ISC Test control
simatk Open IscControl
// Load ISC XML -file
simatk LoadIscTests SimAtk_TimerManagement_custom.xml

// Subcase 1
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk RunIscTestCase 1008 401
waittestclass notify
simatk CheckProactiveCommand Priority 2 ClearScreenTrigger 1 Text "Display Text 1"

// Renotify and wait for 3 seconds
notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk Delay 3000000
simatk SendTerminalResponse

waittestclass notify
simatk CheckProactiveCommand Priority 2 ClearScreenTrigger 1 Text "Display Text 2"
simatk Delay 3000000
simatk SendTerminalResponse

simatk WaitForRequest

// Subcase 2
simatk RunIscTestCase 1008 402
simatk WaitForRequest


// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete notify
delete simatk
[Endtest]

[Test]
title MOD_1008.005_SIM_ATK_TSY_[TIMER MANAGEMENT - 9.1.2.21.5 Maximum timer value]

create SimAtk simatk

// connecting to ETel server
simatk Connect RTelServer
// Load TSY module
simatk Load PhoneTsy.tsy
// open phone module
simatk Open DefaultPhone
// Open SAT API
simatk Open SAT

// Open ISC Test control
simatk Open IscControl
// Load ISC XML -file
simatk LoadIscTests SimAtk_TimerManagement_custom.xml

// Subcase 1
simatk RunIscTestCase 1008 501
simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete simatk

[Endtest]

[Test]
title MOD_1008.006_SIM_ATK_TSY_[TIMER MANAGEMENT - 9.1.2.21.6 Bad cases]

create SimAtk simatk

// connecting to ETel server
simatk Connect RTelServer
// Load TSY module
simatk Load PhoneTsy.tsy
// open phone module
simatk Open DefaultPhone
// Open SAT API
simatk Open SAT

// Open ISC Test control
simatk Open IscControl
// Load ISC XML -file
simatk LoadIscTests SimAtk_TimerManagement_custom.xml

// Subcase 1
simatk RunIscTestCase 1008 601
simatk WaitForRequest

// Subcase 2
simatk RunIscTestCase 1008 602
simatk WaitForRequest

// Subcase 3
simatk RunIscTestCase 1008 603
simatk WaitForRequest

// Subcase 4
simatk RunIscTestCase 1008 604
simatk WaitForRequest

// Subcase 5
simatk RunIscTestCase 1008 605
simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete simatk

[Endtest]
