<?xml version="1.0" encoding="utf-8"?> 

<!-- MOD_0016.001_SIM_ATK_TSY_[PROVIDE LOCAL INFORMATION] -->


<isc-test-control id="16">


<!-- ******** -->
<!-- CHANNELS -->
<!-- ******** -->
<channels>
	<channel id="0x07"/>
</channels>


<!-- ****** -->
<!-- INPUTS -->
<!-- ****** -->
<inputs>


<!-- PROACTIVE COMMANDS -->
<!-- ****************** -->

<!-- USED BY: 27.22.4.15 -->
    <input id="10001">
        <name>PROACTIVE COMMAND: PROVIDE LOCAL INFORMATION 1.1.1</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,0D,D0,09,81,03,01,26,00,82,02,81,82,90,00</message>
    </input>

    <input id="10002">
        <name>PROACTIVE COMMAND: PROVIDE LOCAL INFORMATION 1.2.1</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,0D,D0,09,81,03,01,26,01,82,02,81,82,90,00</message>
    </input>

    <input id="10003">
        <name>PROACTIVE COMMAND: PROVIDE LOCAL INFORMATION 1.3.1</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,0D,D0,09,81,03,01,26,02,82,02,81,82,90,00</message>
    </input>

    <input id="10004">
        <name>PROACTIVE COMMAND: PROVIDE LOCAL INFORMATION 1.4.1</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,0D,D0,09,81,03,01,26,03,82,02,81,82,90,00</message>
    </input>

    <input id="10005">
        <name>PROACTIVE COMMAND: PROVIDE LOCAL INFORMATION 1.5.1</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,0D,D0,09,81,03,01,26,04,82,02,81,82,90,00</message>
    </input>

    <input id="10006">
        <name>PROACTIVE COMMAND: PROVIDE LOCAL INFORMATION 1.6.1</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,0D,D0,09,81,03,01,26,05,82,02,81,82,90,00</message>
    </input>


<!-- NET SERVER -->
<!-- ********** -->

    <input id="30001">
        <name>NET_CELL_INFO_GET_RESP GSM</name>
        <direction>sos</direction>
        <message>00,00,00,C8,00,1A,20,01,00,41,00,01,46,14,00,01,00,00,00,01,00,00,00,01,00,F1,10,00,00,00,00,00</message>
    </input>

    <input id="30002">
        <name>NET_NEIGHBOUR_CELLS_RESP</name>
        <direction>sos</direction>
        <message>00,00,00,C8,00,05,00,00,C5,1B,00,01,0E,28,34,34,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,0A,02,31,02,35,02,38,02,39,02,3D,02,3F,02,41,02,45,02,46,02,49</message> 
    </input>


<!-- INFO SERVER -->
<!-- *********** -->

    <input id="50001">
        <name>INFO_SERIAL_NUMBER_READ_RESP</name>
        <direction>sos</direction>
        <message>00,00,00,1B,00,05,00,00,C1,01,00,01,41,14,00,10,31,32,33,34,35,36,37,38,39,30,31,32,33,34,35,30</message> 
    </input>


<!-- GSS SERVER -->
<!-- ********** -->

    <input id="70001">
        <name>GSS_CS_SERVICE_RESP</name>
        <direction>sos</direction>
        <message>00,00,00,32,00,06,00,00,C6,01,96,01,0C,04,00,00</message> 
    </input>

    <input id="70002">
        <name>GSS_CS_SERVICE_RESP, fail</name>
        <direction>sos</direction>
        <message>00,00,00,32,00,00,00,00,C6,02,96,01</message> 
    </input>


<!-- SIM SESSION END -->
<!-- *************** -->

    <input id="90004">
        <name>SIM Session End</name>
        <direction>sos</direction>
        <message>00,00,00,5A,00,00,78,34,00,13,00,00,90,00,00,00</message>
        <!-- Transaction Id's (9:th byte) must match with Terminal responses transaction id -->
    </input>

</inputs>


<!-- ******* -->
<!-- OUTPUTS -->
<!-- ******* -->
<outputs>


<!-- NET SERVER -->
<!-- ********** -->

<!-- USED BY: 27.22.4.15 -->
    <output id="20001">
        <name>NET_CELL_INFO_GET_REQ</name>
        <direction>dos</direction>
        <message>00,00,00,C8,00,04,00,00,00,40</message>
           <mask>00,00,00,FF,00,FF,FF,00,FF,FF</mask>
    </output>

    <output id="20002">
        <name>NET_NEIGHBOUR_CELLS_REQ</name>
        <direction>dos</direction>
        <message>00,00,00,C8,00,05,00,00,C5,1A,01</message>
           <mask>00,00,00,FF,00,FF,FF,00,00,FF,FF</mask>
    </output>

<!-- TERMINAL RESPONSES -->
<!-- ****************** -->

<!-- USED BY: 27.22.4.15 -->
    <output id="40001">
        <name>TERMINAL RESPONSE: PROVIDE LOCAL INFORMATION 1.1.1</name>
        <direction>dos</direction>
        <message>1D,00,10,5A,00,1E,00,08,00,11,00,00,00,15,81,03,01,26,00,82,02,82,81,83,01,00,93,07,00,F1,10,00,01,00,01,00</message>
           <mask>00,00,00,FF,00,FF,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,7F,FF,FF,7F,FF,FF,FF,FF,FF,FF,FF,FF,FF</mask>
    </output>

    <output id="40002">
        <name>TERMINAL RESPONSE: PROVIDE LOCAL INFORMATION 1.2.1</name>
        <direction>dos</direction>
        <message>1D,00,10,5A,00,1E,00,08,00,11,00,00,00,16,81,03,01,26,01,82,02,82,81,83,01,00,94,08,1A,32,54,76,98,10,32,04</message>
           <mask>00,00,00,FF,00,FF,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,7F,FF,FF,7F,FF,FF,FF,FF,FF,FF,FF,FF,FF</mask>
    </output>

    <output id="40003">
        <name>TERMINAL RESPONSE: PROVIDE LOCAL INFORMATION 1.3.1</name>
        <direction>dos</direction>
        <message>1D,00,10,5A,00,36,00,08,00,11,00,00,00,2D,81,03,01,26,02,82,02,82,81,83,01,00,96,10,34,34,00,00,00,00,00,00,00,00,00,00,00,00,00,00,9D,0D,8C,63,58,E2,39,8F,63,F9,06,45,91,A4,90,00</message>
           <mask>00,00,00,FF,00,FF,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,7F,FF,FF,7F,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF</mask>
    </output>

    <output id="40004">
        <name>TERMINAL RESPONSE: PROVIDE LOCAL INFORMATION 1.4.1</name>
        <direction>dos</direction>
        <message>1D,00,10,5A,00,1E,00,08,00,11,00,00,00,15,81,03,01,26,03,82,02,82,81,83,01,00,A6,07,20,50,70,41,80,71,FF,00</message>
           <mask>00,00,00,FF,00,FF,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,7F,FF,FF,7F,FF,00,00,00,00,00,00,FF,FF</mask>
    </output>

    <output id="40005">
        <name>TERMINAL RESPONSE: PROVIDE LOCAL INFORMATION 1.5.1</name>
        <direction>dos</direction>
        <message>1D,00,10,5A,00,1A,00,08,00,11,00,00,00,10,81,03,01,26,04,82,02,82,81,83,01,00,AD,02,65,6E,00,00</message>
           <mask>00,00,00,FF,00,FF,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,7F,FF,FF,7F,FF,FF,FF,FF,FF</mask>
    </output>

    <output id="40006">
        <name>TERMINAL RESPONSE: PROVIDE LOCAL INFORMATION 1.6.1</name>
        <direction>dos</direction>
        <message>1D,00,10,5A,00,1A,00,08,00,11,00,00,00,10,81,03,01,26,05,82,02,82,81,83,01,00,AE,02,00,00,00,00</message>
           <mask>00,00,00,FF,00,FF,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,7F,FF,FF,7F,FF,FF,FF,FF,FF</mask>
    </output>


<!-- GSS SERVER -->
<!-- ********** -->

    <output id="60001">
        <name>GSS_CS_SERVICE_REQ</name>
        <direction>dos</direction>
        <message>00,00,00,32,00,06,00,00,C6,00,96,00</message>
           <mask>00,00,00,FF,00,FF,FF,00,00,FF,FF,FF</mask>
    </output>

</outputs>


<!-- ********** -->
<!-- TEST STEPS -->
<!-- ********** -->
<steps>


<!-- PROACTIVE COMMANDS -->
<!-- ****************** -->

<!-- USED BY: 27.22.4.15 -->
    <step id="10001" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10001"/>
    </step>

    <step id="10002" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10002"/>
    </step>

    <step id="10003" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10003"/>
    </step>

    <step id="10004" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10004"/>
    </step>

    <step id="10005" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10005"/>
    </step>

    <step id="10006" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10006"/>
    </step>


<!-- NET SERVER REQ -->
<!-- ************** -->

<!-- USED BY: 27.22.4.15 -->
    <step id="20001" type="intercept">
        <name>NET_CELL_INFO_GET_REQ</name>
        <channel id="0x07"/>
        <output-ref id="20001"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>

    <step id="20002" type="intercept">
        <name>NET_NEIGHBOUR_CELLS_REQ</name>
        <channel id="0x07"/>
        <output-ref id="20002"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>

<!-- NET SERVER RESP -->
<!-- *************** -->

<!-- USED BY: 27.22.4.15 -->
    <step id="30001" type="simulate">
        <name>NET_CELL_INFO_GET_RESP</name>
        <channel id="0x07"/>
        <input-ref id="30001"/>
    </step>

    <step id="30002" type="simulate">
        <name>NET_NEIGHBOUR_CELLS_RESP</name>
        <channel id="0x07"/>
        <input-ref id="30002"/>
    </step>

<!-- TERMINAL RESPONSES -->
<!-- ****************** -->

<!-- USED BY: 27.22.4.15 -->
    <step id="40001" type="intercept">
        <name>Intercept TR</name>
        <channel id="0x07"/>
        <output-ref id="40001"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>

    <step id="40002" type="intercept">
        <name>Intercept TR</name>
        <channel id="0x07"/>
        <output-ref id="40002"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>

    <step id="40003" type="intercept">
        <name>Intercept TR</name>
        <channel id="0x07"/>
        <output-ref id="40003"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>

    <step id="40004" type="intercept">
        <name>Intercept TR</name>
        <channel id="0x07"/>
        <output-ref id="40004"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>

    <step id="40005" type="intercept">
        <name>Intercept TR</name>
        <channel id="0x07"/>
        <output-ref id="40005"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>

    <step id="40006" type="intercept">
        <name>Intercept TR</name>
        <channel id="0x07"/>
        <output-ref id="40006"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>


<!-- INFO SERVER RESP -->
<!-- **************** -->

<!-- USED BY: 27.22.4.15 -->
    <step id="50001" type="simulate">
        <name>INFO_SERIAL_NUMBER_READ_RESP</name>
        <channel id="0x07"/>
        <input-ref id="50001"/>
    </step>


<!-- GSS SERVER -->
<!-- ********** -->

    <step id="60001" type="intercept">
        <name>GSS_CS_SERVICE_REQ</name>
        <channel id="0x07"/>
        <output-ref id="60001"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>

    <step id="70001" type="simulate">
        <name>GSS_CS_SERVICE_RESP</name>
        <channel id="0x07"/>
        <input-ref id="70001"/>
    </step>

    <step id="70002" type="simulate">
        <name>GSS_CS_SERVICE_RESP, Fail</name>
        <channel id="0x07"/>
        <input-ref id="70002"/>
        <flags>0x40</flags>
    </step>


<!-- GENERAL STEPS -->
<!-- ************* -->

    <step id="90001" type="sync">
        <name>Sync with test env</name>
    </step>

    <step id="90002" type="open-channel">
        <name>Attach to channel 7</name>
        <channel id="0x07"/>
    </step>

    <step id="90003" type="close-channel">
        <name>Detach from channel 7</name>
        <channel id="0x07"/>
    </step>

    <step id="90004" type="simulate">
        <name>SIM session end</name>
        <channel id="0x07"/>
        <input-ref id="90004"/>
        <flags>0x40</flags>  <!-- Use stored transaction ID in simulated message -->        
    </step>

</steps>


<!-- ********** -->
<!-- TEST CASES -->
<!-- ********** -->
<cases>

<!-- 27.22.4.15	PROVIDE LOCAL INFORMATION -->

    <case id="101">
        <name>Sequence 1.1 (PROVIDE LOCAL INFORMATION, Local Info (MCC, MNC, LAC and Cell ID))</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->

            <step-ref id="10001"/> <!-- Send PCMD -->
            <step-ref id="20001"/> <!-- NET_CELL_INFO_GET_REQ -->
            <step-ref id="30001"/> <!-- NET_CELL_INFO_GET_RESP -->
            <step-ref id="40001"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->

            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>

    <case id="102">
        <name>Sequence 1.2 (PROVIDE LOCAL INFORMATION, IMEI of the ME)</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->

            <step-ref id="50001"/> <!-- INFO_SERIAL_NUMBER_READ_RESP -->
            <step-ref id="10002"/> <!-- Send PCMD -->
            <step-ref id="40002"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->
            
            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>

    <case id="103">
        <name>Sequence 1.3 (PROVIDE LOCAL INFORMATION, Network Measurement Results (NMR))</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->

            <step-ref id="10003"/> <!-- Send PCMD -->
            <step-ref id="20002"/> <!-- NET_NEIGHBOUR_CELLS_REQ -->
            <step-ref id="30002"/> <!-- NET_NEIGHBOUR_CELLS_RESP -->
            <step-ref id="40003"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->
            
            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>

    <case id="104">
        <name>Sequence 1.4 (PROVIDE LOCAL INFORMATION, Date, Time, Time Zone)</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->

            <step-ref id="10004"/> <!-- Send PCMD -->
            <step-ref id="40004"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->
            
            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>

    <case id="105">
        <name>Sequence 1.5 (PROVIDE LOCAL INFORMATION, Language setting)</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->

            <step-ref id="10005"/> <!-- Send PCMD -->
            <step-ref id="40005"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->
            
            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>

    <case id="106">
        <name>Sequence 1.6 (PROVIDE LOCAL INFORMATION, Timing advance)</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->

            <step-ref id="10006"/> <!-- Send PCMD -->
            <step-ref id="60001"/> <!-- GSS_CS_SERVICE_REQ -->
            <step-ref id="70001"/> <!-- GSS_CS_SERVICE_RESP -->
            <step-ref id="40006"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->
            
            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>

</cases>

</isc-test-control>
