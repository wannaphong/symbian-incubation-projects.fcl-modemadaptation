<?xml version="1.0" encoding="utf-8"?> 

<!-- MOD_0024.002_SIM_ATK_TSY_[OPEN CHANNEL - related to GPRS] -->


<isc-test-control id="24">


<!-- ******** -->
<!-- CHANNELS -->
<!-- ******** -->
<channels>
	<channel id="0x07"/>
</channels>


<!-- ****** -->
<!-- INPUTS -->
<!-- ****** -->
<inputs>


<!-- PROACTIVE COMMANDS -->
<!-- ****************** -->

    <!-- USED BY: 27.22.4.27.2 -->
    <input id="10011">
        <name>PROACTIVE COMMAND: OPEN CHANNEL 2.1.1</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,3A,D0,36,81,03,01,40,01,82,02,81,82,35,07,02,02,04,05,05,10,02,39,02,05,78,0D,08,F4,55,73,65,72,4C,6F,67,0D,08,F4,55,73,65,72,50,77,64,3C,03,01,AD,9C,3E,05,21,01,01,01,01,90,00</message>
    </input>
    
    <input id="10012">
        <name>PROACTIVE COMMAND: OPEN CHANNEL 2.2.1</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,46,D0,42,81,03,01,40,01,82,02,81,82,35,07,02,02,04,05,05,10,02,39,02,05,78,47,0A,06,54,65,73,74,47,70,02,72,73,0D,08,F4,55,73,65,72,4C,6F,67,0D,08,F4,55,73,65,72,50,77,64,3C,03,01,AD,9C,3E,05,21,01,01,01,01,90,00</message>
    </input>
    
    <input id="10013">
        <name>PROACTIVE COMMAND: OPEN CHANNEL 2.3.1</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,4F,D0,4B,81,03,01,40,01,82,02,81,82,05,07,4F,70,65,6E,20,49,44,35,07,02,02,04,05,05,10,02,39,02,05,78,47,0A,06,54,65,73,74,47,70,02,72,73,0D,08,F4,55,73,65,72,4C,6F,67,0D,08,F4,55,73,65,72,50,77,64,3C,03,01,AD,9C,3E,05,21,01,01,01,01,90,00</message>
    </input>
    
    <input id="10014">
        <name>PROACTIVE COMMAND: OPEN CHANNEL 2.4.1</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,4A,D0,46,81,03,01,40,01,82,02,81,82,05,00,35,07,02,02,04,05,05,10,02,39,02,05,78,47,0A,06,54,65,73,74,47,70,02,6F,67,3E,00,0D,08,F4,55,73,65,72,4C,6F,67,0D,08,F4,55,73,65,72,50,77,64,3C,03,01,AD,9C,3E,05,21,01,01,01,01,90,00</message>
    </input>    
    
    <input id="10015">
        <name>PROACTIVE COMMAND: OPEN CHANNEL 2.5.1</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,46,D0,42,81,03,01,40,01,82,02,81,82,35,07,02,02,04,05,05,10,02,39,02,FF,FF,47,0A,06,54,65,73,74,47,70,02,72,73,0D,08,F4,55,73,65,72,4C,6F,67,0D,08,F4,55,73,65,72,50,77,64,3C,03,01,AD,9C,3E,05,21,01,01,01,01,90,00</message>
    </input>
    
    <!-- Sequence 2.6 is void -->
    
    <input id="10017">
        <name>PROACTIVE COMMAND: OPEN CHANNEL 2.7.1</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,4F,d0,4b,81,03,01,40,01,82,02,81,82,05,07,4f,70,65,6e,20,49,44,35,07,02,02,04,05,05,10,02,39,02,05,78,47,0a,06,54,65,73,74,47,70,02,72,73,0d,08,f4,55,73,65,72,4c,6f,67,0d,08,f4,55,73,65,72,50,77,64,3c,03,01,ad,9c,3e,05,21,01,01,01,01,90,00</message>
    </input>
    
    <input id="10018">
        <name>PROACTIVE COMMAND: OPEN CHANNEL 2.8.1</name>
        <direction>sos</direction>
        <message>15,28,00,5A,00,00,08,00,00,10,00,55,00,46,D0,42,81,03,01,40,01,82,02,81,82,35,07,02,02,04,05,05,10,02,39,02,05,78,47,0A,06,54,65,73,74,47,70,02,72,73,0D,08,F4,55,73,65,72,4C,6F,67,0D,08,F4,55,73,65,72,50,77,64,3C,03,01,AD,9C,3E,05,21,01,01,01,01,90,00</message>
    </input>
    
<!-- SIM SESSION END -->
<!-- *************** -->
    <input id="90004">
        <name>SIM Session End</name>
        <direction>sos</direction>
        <message>00,00,00,5A,00,00,78,34,00,13,00,00,90,00,00,00</message>
        <!-- Transaction Id's (9:th byte) must match with Terminal responses transaction id -->
    </input>

</inputs>


<!-- ******* -->
<!-- OUTPUTS -->
<!-- ******* -->
<outputs>
    
<!-- TERMINAL RESPONSES -->
<!-- ****************** -->

    <!-- USED BY: 27.22.4.27.2 -->
    <output id="40011">
        <name>TERMINAL RESPONSE: OPEN CHANNEL 2.1.1B, used also in 2.3.1 and 2.4.1</name>
        <direction>dos</direction>
        <message>1D,00,10,5A,00,26,00,08,00,11,00,00,00,1D,81,03,01,40,01,82,02,82,81,83,01,00,38,02,81,00,35,07,02,00,04,05,05,10,02,39,02,05,78,00</message>
           <mask>00,00,00,FF,00,FF,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,7F,FF,FF,7F,FF,FF,FF,7F,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,FF</mask>
    </output>

    <output id="40012">
        <name>TERMINAL RESPONSE: OPEN CHANNEL 2.2.1B</name>
        <direction>dos</direction>
        <message>1D,00,10,5A,00,26,00,08,00,11,00,00,00,1D,81,03,01,40,01,82,02,82,81,83,01,00,38,02,81,00,35,07,02,00,04,05,05,10,02,39,02,05,78,00</message>
           <mask>00,00,00,FF,00,FF,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,7F,FF,FF,7F,FF,FF,FF,7F,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,FF</mask>
    </output>

    <output id="40015">
        <name>TERMINAL RESPONSE: OPEN CHANNEL 2.5.1B</name>
        <direction>dos</direction>
        <message>1D,00,10,5A,00,26,00,08,00,11,00,00,00,1D,81,03,01,40,01,82,02,82,81,83,01,07,38,02,81,00,35,07,02,00,04,05,05,10,02,39,02,05,78,00</message>
           <mask>00,00,00,FF,00,FF,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,7F,FF,FF,7F,FF,FF,FF,7F,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,FF</mask>
    </output>
    
    <!-- Placeholder for Sequence 2.6.1 terminal response -->
    
    <output id="40017">
        <name>TERMINAL RESPONSE: OPEN CHANNEL 2.7.1B</name>
        <direction>dos</direction>
        <message>1D,00,10,5A,00,22,00,08,00,11,00,00,00,19,81,03,01,40,01,82,02,82,81,83,01,22,35,07,02,00,04,05,05,10,02,39,02,05,78,00</message>
           <mask>00,00,00,FF,00,FF,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,7F,FF,FF,7F,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,FF</mask>
    </output>
    
    <output id="40018">
        <name>TERMINAL RESPONSE: OPEN CHANNEL 2.8.1B</name>
        <direction>dos</direction>
        <message>1D,00,10,5A,00,22,00,08,00,11,00,00,00,1A,81,03,01,40,01,82,02,82,81,83,02,20,02,35,07,02,00,04,05,05,10,02,39,02,05,78</message>
           <mask>00,00,00,FF,00,FF,00,00,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF,7F,FF,FF,FF,7F,FF,FF,FF,FF,FF,FF,FF,FF,7F,FF,FF,FF</mask>
    </output>
    
    
</outputs>

<!-- ********** -->
<!-- TEST STEPS -->
<!-- ********** -->
<steps>


<!-- PROACTIVE COMMANDS -->
<!-- ****************** -->

<!-- USED BY: 27.22.4.27.2 -->
    <step id="10011" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10011"/>
    </step>

    <step id="10012" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10012"/>
    </step>

    <step id="10013" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10013"/>
    </step>

    <step id="10014" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10014"/>
    </step>

    <step id="10015" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10015"/>
    </step>
    
    <!-- Sequence 2.6 is void -->
    
    <step id="10017" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10017"/>
    </step>
    
    <step id="10018" type="simulate">
        <name>Send PCMD</name>
        <channel id="0x07"/>
        <input-ref id="10018"/>
    </step>
    
<!-- TERMINAL RESPONSES -->
<!-- ****************** -->

<!-- USED BY: 27.22.4.27.2 -->
    <step id="40011" type="intercept">
        <name>Intercept TR</name>
        <channel id="0x07"/>
        <output-ref id="40011"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>

    <step id="40012" type="intercept">
        <name>Intercept TR</name>
        <channel id="0x07"/>
        <output-ref id="40012"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>
    
    <step id="40015" type="intercept">
        <name>Intercept TR</name>
        <channel id="0x07"/>
        <output-ref id="40015"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>

    <!-- Placeholder for Sequence 2.6 terminal response -->

    <step id="40017" type="intercept">
        <name>Intercept TR</name>
        <channel id="0x07"/>
        <output-ref id="40017"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>

    <step id="40018" type="intercept">
        <name>Intercept TR</name>
        <channel id="0x07"/>
        <output-ref id="40018"/>
        <flags>0x40</flags>  <!-- Store transaction ID from intercepted message -->
    </step>

<!-- GENERAL STEPS -->
<!-- ************* -->

    <step id="90001" type="sync">
        <name>Sync with test env</name>
    </step>

    <step id="90002" type="open-channel">
        <name>Attach to channel 7</name>
        <channel id="0x07"/>
    </step>

    <step id="90003" type="close-channel">
        <name>Detach from channel 7</name>
        <channel id="0x07"/>
    </step>

    <step id="90004" type="simulate">
        <name>SIM session end</name>
        <channel id="0x07"/>
        <input-ref id="90004"/>
        <flags>0x40</flags>  <!-- Use stored transaction ID in simulated message -->        
    </step>

</steps>


<!-- ********** -->
<!-- TEST CASES -->
<!-- ********** -->
<cases>

<!-- 27.22.4.27.2	Open Channel (related to GPRS) -->
    <case id="201">
        <name>Sequence 2.1 (OPEN CHANNEL, immediate link establishment, GPRS, no local address, no alpha identifier, no network access name)</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->
            <step-ref id="10011"/> <!-- Send PCMD -->
            <step-ref id="40011"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->
            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>

    <case id="202">
        <name>Sequence 2.2 (OPEN CHANNEL, immediate link establishment GPRS, no alpha identifier, with network access name)</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->
            <step-ref id="10012"/> <!-- Send PCMD -->
            <step-ref id="40012"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->
            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>
    
    <case id="203">
        <name>Sequence 2.3 (OPEN CHANNEL, immediate link establishment, GPRS, with alpha identifier)</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->
            <step-ref id="10013"/> <!-- Send PCMD -->
            <step-ref id="40011"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->
            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>
    
    <case id="204">
        <name>Sequence 2.4 (OPEN CHANNEL, immediate link establishment, GPRS, with null alpha identifier)</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->
            <step-ref id="10014"/> <!-- Send PCMD -->
            <step-ref id="40011"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->
            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>
    
    <case id="205">
        <name>Sequence 2.5 (OPEN CHANNEL, immediate link establishment, GPRS, command performed with modifications (buffer size) )</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->
            <step-ref id="10015"/> <!-- Send PCMD -->
            <step-ref id="40015"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->
            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>
    
    <!-- Sequence 2.6 is void -->
    
    <case id="207">
        <name>Sequence 2.7 (OPEN CHANNEL, immediate link establishment, GPRS, open command with alpha identifier, User did not accept the proactive command)</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->
            <step-ref id="10017"/> <!-- Send PCMD -->
            <step-ref id="40017"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->
            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>
    
    <case id="208">
        <name>Sequence 2.8 (OPEN CHANNEL, immediate link establishment, GPRS, ME busy on call)</name>
        <timeout>10</timeout>
        <test-steps>
            <step-ref id="90002"/> <!-- Attach to channel 7 -->
            <step-ref id="10018"/> <!-- Send PCMD -->
            <step-ref id="40018"/> <!-- Receive TR -->
            <step-ref id="90004"/> <!-- SimSessionEnd -->
            <step-ref id="90003"/> <!-- Detach from channel 7 -->
        </test-steps>
    </case>    
</cases>

</isc-test-control>
