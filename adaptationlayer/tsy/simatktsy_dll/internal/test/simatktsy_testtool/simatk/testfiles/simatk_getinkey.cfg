//* Copyright (c) 2009 Nokia Corporation and/or its subsidiary(-ies).
//* All rights reserved.
//* This component and the accompanying materials are made available
//* under the terms of the License "Eclipse Public License v1.0"
//* which accompanies this distribution, and is available
//* at the URL "http://www.eclipse.org/legal/epl-v10.html".
//*
//* Initial Contributors:
//* Nokia Corporation - initial contribution.
//*
//* Contributors:
//*
//* Description:  


//
// Precondition: 
// - Detailed description can be found from Quality Center's Project: CoreSW_CASW/Module Tests/SIM ATK TSY/SimAtkTSY_testtool
//
// Script description:
//

// Proactive command //
///////////////////////

// RspFormat
//  0 response format not set.
//  1 Get a digit (0-9, *, #, and +) from the user.
//  2 Get a character from the SMS default alphabet from the user.
//  3 Get a character from the UCS2 alphabet from the user.
//  4 Get a Yes or No decision from the user.

// Mode
// 0 EGetInkeyRspModeNotSet, initialisation value.
// 1 EUserRspDisplayed. Display character that the user chooses.  You may allow the user to
//   alter and/or confirm their choice before passing the character back to the UICC.
// 2 EImmediateDigitRsp, An immediate response is requested. The response must be a digit (0-
//   9, *, #, and +). Do not display the digit, and do not allow the user to
//   alter or confirm their choice before returning the digit to the UICC.

// Help
//  0 EHelpNotSet, Initialization value used within constructor(s).
//  1 Help information available to the user.
//  2 No help information is available to the user.

// Duration
//  TimeUnit, unit used to encode the duration
//     0, timeUnitNotSet. Initialization value used within constructor(s).
//     1, no duration has been provided. The ME should default to general beep.
//     2, the duration is expressed in minutes.
//     3, the duration is expressed in seconds.
//     4, the duration is expressed in tenths of seconds.
//  NumOfUnits, 
//     Valid range is 1 to 255
//  Example 10 minutes: Duration 2 10 

// IconId
//  IconQualifier
//      0 NotSet
//      1 NoIconId
//      2 SelfExplanatory
//      3 NotSelfExplanatory
//  IconIdentifier
//      Id number
//  Example SelfExplanatory ID 5: IconId 2 5

// Terminal Response //
///////////////////////

// GeneralResult
//  General result of the proactive command.

// AdditionalInfo
//  Enter the text inside the quotes or as unicode hex digits. Example: Text "abc" or Text 61 62 63

// InfoType
//  Set to TextString (0x0020) to return a key press.  Some error values
//  of GeneralResult require additional information, in which case set
//  this to MeProblem (0x0002).  Otherwise set to NoAdditionalInfo (0x0001).

// RspFormat
//  See above. Default is same as in original proactive command 

// Duration
//  See above

[Test]
title MOD_0003.001_SIM_ATK_TSY_[GET INKEY - normal]

create SimAtk simatk
create SimAtkNotify notify

// connecting to ETel server
simatk Connect RTelServer
// Load TSY module
simatk Load PhoneTsy.tsy
// open phone module
simatk Open DefaultPhone
// Open SAT API
simatk Open SAT

// Open ISC Test control
simatk Open IscControl
// Load ISC XML -file
simatk LoadIscTests SimAtk_GetInkey.xml


// SEQ 1.1
notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk RunIscTestCase 3 101
waittestclass notify
// Text in hexadecimal: Enter "+"
simatk CheckProactiveCommand Text 45 6E 74 65 72 20 22 2B 22 RspFormat 1 Mode 1
simatk SendTerminalResponse GeneralResult 0 AdditionalInfo "+" InfoType TextString
simatk WaitForRequest

// SEQ 1.2
notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk RunIscTestCase 3 102
waittestclass notify
// Text in hexadecimal: Enter "0"
simatk CheckProactiveCommand Text 45 6E 74 65 72 20 22 30 22 RspFormat 1 Mode 1
simatk SendTerminalResponse AdditionalInfo "0" InfoType TextString RspFormat 1
simatk WaitForRequest

// SEQ 1.3
notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk RunIscTestCase 3 103
waittestclass notify
simatk CheckProactiveCommand Text "<GO-BACKWARDS>" RspFormat 1 Mode 1
simatk SendTerminalResponse GeneralResult BackwardModeRequestedByUser
simatk WaitForRequest

// SEQ 1.4
notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk RunIscTestCase 3 104
waittestclass notify
simatk CheckProactiveCommand Text "<ABORT>" RspFormat 1 Mode 1
simatk SendTerminalResponse GeneralResult SessionTerminatedByUser
simatk WaitForRequest

// SEQ 1.5
notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk RunIscTestCase 3 105
waittestclass notify
// Text in hexadecimal: Enter "q"
simatk CheckProactiveCommand Text 45 6E 74 65 72 20 22 71 22 RspFormat 2 Mode 1
simatk SendTerminalResponse AdditionalInfo "q" InfoType TextString
simatk WaitForRequest

// SEQ 1.6
notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk RunIscTestCase 3 106
waittestclass notify
// Text in hexadecimal: Enter "x". This command instructs the ME to display text, and to expect the user to enter a single character. Any response entered by the user shall be passed t
simatk CheckProactiveCommand RspFormat 2 Mode 1 Text 45 6E 74 65 72 20 22 78 22 2E 20 54 68 69 73 20 63 6F 6D 6D 61 6E 64 20 69 6E 73 74 72 75 63 74 73 20 74 68 65 20 4D 45 20 74 6F 20 64 69 73 70 6C 61 79 20 74 65 78 74 2C 20 61 6E 64 20 74 6F 20 65 78 70 65 63 74 20 74 68 65 20 75 73 65 72 20 74 6F 20 65 6E 74 65 72 20 61 20 73 69 6E 67 6C 65 20 63 68 61 72 61 63 74 65 72 2E 20 41 6E 79 20 72 65 73 70 6F 6E 73 65 20 65 6E 74 65 72 65 64 20 62 79 20 74 68 65 20 75 73 65 72 20 73 68 61 6C 6C 20 62 65 20 70 61 73 73 65 64 20 74
simatk SendTerminalResponse AdditionalInfo "x" InfoType TextString
simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete notify
delete simatk
[Endtest]

[Test]
title MOD_0003.002_SIM_ATK_TSY_[GET INKEY - No response from User]

create SimAtk simatk
create SimAtkNotify notify

// connecting to ETel server
simatk Connect RTelServer
// Load TSY module
simatk Load PhoneTsy.tsy
// open phone module
simatk Open DefaultPhone
// Open SAT API
simatk Open SAT

// Open ISC Test control
simatk Open IscControl
// Load ISC XML -file
simatk LoadIscTests SimAtk_GetInkey.xml

// SEQ 2.1
notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk RunIscTestCase 3 201
waittestclass notify
simatk CheckProactiveCommand Text "<TIME-OUT>" RspFormat 1 Mode 1
simatk SendTerminalResponse GeneralResult NoResponseFromUser
simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete notify
delete simatk
[Endtest]

[Test]
title MOD_0003.003_SIM_ATK_TSY_[GET INKEY - UCS2 format display]

create SimAtk simatk
create SimAtkNotify notify

// connecting to ETel server
simatk Connect RTelServer
// Load TSY module
simatk Load PhoneTsy.tsy
// open phone module
simatk Open DefaultPhone
// Open SAT API
simatk Open SAT

// Open ISC Test control
simatk Open IscControl
// Load ISC XML -file
simatk LoadIscTests SimAtk_GetInkey.xml

// SEQ 3.1
notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk RunIscTestCase 3 301
waittestclass notify
// Text in hex: "Hello" in Russia
simatk CheckProactiveCommand Text 0417 0414 0420 0410 0412 0421 0422 0412 0423 0419 0422 0415 RspFormat 1 Mode 1
simatk SendTerminalResponse AdditionalInfo "+" InfoType TextString
simatk WaitForRequest

// SEQ 3.2
notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk RunIscTestCase 3 302
waittestclass notify
// Text in hex: "Hello" in Russia 6 times
simatk CheckProactiveCommand Text 0417 0414 0420 0410 0412 0421 0422 0412 0423 0419 0422 0415 0417 0414 0420 0410 0412 0421 0422 0412 0423 0419 0422 0415 0417 0414 0420 0410 0412 0421 0422 0412 0423 0419 0422 0415 0417 0414 0420 0410 0412 0421 0422 0412 0423 0419 0422 0415 0417 0414 0420 0410 0412 0421 0422 0412 0423 0419 0422 0415 0417 0414 0420 0410 0412 0421 0422 0412 0423 0419 RspFormat 1 Mode 1
simatk SendTerminalResponse AdditionalInfo "+" InfoType TextString
simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete notify
delete simatk
[Endtest]

[Test]
title MOD_0003.004_SIM_ATK_TSY_[GET INKEY - UCS2 format of entry]

create SimAtk simatk
create SimAtkNotify notify

// connecting to ETel server
simatk Connect RTelServer
// Load TSY module
simatk Load PhoneTsy.tsy
// open phone module
simatk Open DefaultPhone
// Open SAT API
simatk Open SAT

// Open ISC Test control
simatk Open IscControl
// Load ISC XML -file
simatk LoadIscTests SimAtk_GetInkey.xml

// SEQ 4.1
notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk RunIscTestCase 3 401
waittestclass notify
simatk CheckProactiveCommand Text "Enter" RspFormat 3 Mode 1
simatk SendTerminalResponse AdditionalInfo 0414 InfoType TextString
simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete notify
delete simatk
[Endtest]

[Test]
title MOD_0003.005_SIM_ATK_TSY_[GET INKEY - "Yes/No" Response]

create SimAtk simatk
create SimAtkNotify notify

// connecting to ETel server
simatk Connect RTelServer
// Load TSY module
simatk Load PhoneTsy.tsy
// open phone module
simatk Open DefaultPhone
// Open SAT API
simatk Open SAT

// Open ISC Test control
simatk Open IscControl
// Load ISC XML -file
simatk LoadIscTests SimAtk_GetInkey.xml

// SEQ 5.1
notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk RunIscTestCase 3 501
waittestclass notify
// GET INKEY 5.1.1
simatk CheckProactiveCommand Text "Enter YES" RspFormat 4 Mode 1
simatk SendTerminalResponse AdditionalInfo 01 InfoType TextString

notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk SyncIscTestCase
waittestclass notify
// GET INKEY 5.1.2
simatk CheckProactiveCommand Text "Enter NO" RspFormat 4 Mode 1
simatk SendTerminalResponse AdditionalInfo 00 InfoType TextString

simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete notify
delete simatk
[Endtest]

[Test]
title MOD_0003.006_SIM_ATK_TSY_[GET INKEY - display of Icon (Sequence B)]

create SimAtk simatk
create SimAtkNotify notify

// connecting to ETel server
simatk Connect RTelServer
// Load TSY module
simatk Load PhoneTsy.tsy
// open phone module
simatk Open DefaultPhone
// Open SAT API
simatk Open SAT

// Open ISC Test control
simatk Open IscControl
// Load ISC XML -file
simatk LoadIscTests SimAtk_GetInkey.xml

// SEQ 6.1B
notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk RunIscTestCase 3 601
waittestclass notify
simatk CheckProactiveCommand Text "<NO-ICON>" RspFormat 1 Mode 1 IconId 2 1
simatk SendTerminalResponse GeneralResult SuccessRequestedIconNotDisplayed AdditionalInfo "+" InfoType TextString
simatk WaitForRequest

// SEQ 6.2B
notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk RunIscTestCase 3 602
waittestclass notify
simatk CheckProactiveCommand Text "<BASIC-ICON>" RspFormat 1 Mode 1 IconId 3 1
simatk SendTerminalResponse GeneralResult SuccessRequestedIconNotDisplayed AdditionalInfo "+" InfoType TextString
simatk WaitForRequest

// SEQ 6.3B
notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk RunIscTestCase 3 603
waittestclass notify
simatk CheckProactiveCommand Text "<NO-ICON>" RspFormat 1 Mode 1 IconId 2 2
simatk SendTerminalResponse GeneralResult SuccessRequestedIconNotDisplayed AdditionalInfo "+" InfoType TextString
simatk WaitForRequest

// SEQ 6.4B
notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk RunIscTestCase 3 604
waittestclass notify
simatk CheckProactiveCommand Text "<COLOUR-ICON>" RspFormat 1 Mode 1 IconId 3 2
simatk SendTerminalResponse GeneralResult SuccessRequestedIconNotDisplayed AdditionalInfo "+" InfoType TextString
simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete notify
delete simatk
[Endtest]

[Test]
title MOD_0003.007_SIM_ATK_TSY_[GET INKEY - Help Information]

create SimAtk simatk
create SimAtkNotify notify

// connecting to ETel server
simatk Connect RTelServer
// Load TSY module
simatk Load PhoneTsy.tsy
// open phone module
simatk Open DefaultPhone
// Open SAT API
simatk Open SAT

// Open ISC Test control
simatk Open IscControl
// Load ISC XML -file
simatk LoadIscTests SimAtk_GetInkey.xml

// SEQ 7.1
notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk RunIscTestCase 3 701
waittestclass notify
// GET INKEY 7.1.1
simatk CheckProactiveCommand Text "Enter \x22+\x22" Help 1 RspFormat 1 Mode 1
simatk SendTerminalResponse GeneralResult HelpRequestedByUser

notify UseObjectAddress simatk ESatNotifyDisplayTextPCmd
simatk SyncIscTestCase
waittestclass notify
// DISPLAY TEXT 7.1.1
simatk CheckProactiveCommand CommandType ESatNotifyDisplayTextPCmd Priority 1 ClearScreenTrigger 2 Text "Help information" ImmediateRsp 2
simatk SendTerminalResponse CommandType ESatNotifyDisplayTextPCmd

notify UseObjectAddress simatk ESatNotifyGetInkeyPCmd
simatk SyncIscTestCase
waittestclass notify
// GET INKEY 7.1.2
simatk CheckProactiveCommand CommandType ESatNotifyGetInkeyPCmd Text "Enter \x22+\x22" Help 1 RspFormat 1 Mode 1
simatk SendTerminalResponse CommandType ESatNotifyGetInkeyPCmd  AdditionalInfo "+" InfoType TextString

simatk WaitForRequest

// close all
simatk Close IscControl
simatk Close SAT
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete notify
delete simatk
[Endtest]
