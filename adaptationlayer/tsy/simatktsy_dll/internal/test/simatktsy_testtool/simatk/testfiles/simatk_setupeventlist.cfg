//* Copyright (c) 2009 Nokia Corporation and/or its subsidiary(-ies).
//* All rights reserved.
//* This component and the accompanying materials are made available
//* under the terms of the License "Eclipse Public License v1.0"
//* which accompanies this distribution, and is available
//* at the URL "http://www.eclipse.org/legal/epl-v10.html".
//*
//* Initial Contributors:
//* Nokia Corporation - initial contribution.
//*
//* Contributors:
//*
//* Description:  



// MOD_0017.001_SIM_ATK_TSY_[SET UP EVENT LIST - normal]
//
// Precondition: 
// - Detailed description can be found from Quality Center's Project: CoreSW_CASW/Module Tests/SIM ATK TSY/SimAtkTSY_testtool
//
// Script description:

// Proactive command //
///////////////////////

// Type (default 1, UpdateEventList)
//  Determines the command type: does the command contain a new event list or does it cancel
//  the previous event list.
//      0 SetUpEventListTypeNotSet, value used in constructor.
//      1 UpdateEventList, command contains a new event list that replaces any previous list.
//      2 RemoveExistingEventList, command contains no event list.  
//        Instead, remove any existing events from the list.

// Events
//  Flags form the list of events in a SET UP EVENT LIST proactive command. Used with Type UpdateEventList.
//  Not all Events are passed to client. These event have value 0 in the list below.
//      0x0000, MT call
//      0x0000, Call connected
//      0x0000, Call disconnected
//      0x0000, Location status
//      0x0010, User activity
//      0x0020, Idle screen available
//      0x0040, Card reader status
//      0x0080, Language selection
//      0x0100, Browser termination
//      0x0200, Data available
//      0x0400, Channel status
//      0x0000, Access Technology Change
//      0x1000, Display parameters changed
//      0x2000  Local connection
// Example:
// Events 30 (User activity & idle screen available)
// Events 0  (Call connected & disconnected)
        
// Terminal Response //
///////////////////////

// GeneralResult
//  General result of the proactive command. Default command performed successfully.

// AdditionalInfo
//  Contains additional information associated with certain error codes set in GeneralResult. 
//  If the value in iGeneralResult does not require any information then leave this field empty (default).

// InfoType
//  If the value of GeneralResult requires additional information, set this to MeProblem.  Otherwise set to
//  NoAdditionalInfo (default)

[Test]
title MOD_0017.001_SIM_ATK_TSY_[SET UP EVENT LIST - normal]

create SimAtk simatk
create SimAtkNotify notify
simatk Connect RTelServer
simatk Load PhoneTsy.tsy
simatk Open DefaultPhone
simatk Open SAT
simatk Open IscControl

// Load ISC XML -file
simatk LoadIscTests SimAtk_SetUpEventList.xml


// SEQ 1
notify UseObjectAddress simatk ESatNotifySetUpEventListPCmd
simatk RunIscTestCase 17 101
waittestclass notify
// Call connected not handled by client
simatk CheckProactiveCommand Events 0
simatk SendTerminalResponse
simatk WaitForRequest


// SEQ 2
notify UseObjectAddress simatk ESatNotifySetUpEventListPCmd
simatk RunIscTestCase 17 102
waittestclass notify
// Call connected & disconnected not handled by client
simatk CheckProactiveCommand Events 0
simatk SendTerminalResponse

notify UseObjectAddress simatk ESatNotifySetUpEventListPCmd
simatk SyncIscTestCase
waittestclass notify
// Call disconnected not handled by client
simatk CheckProactiveCommand Events 0
simatk SendTerminalResponse
simatk WaitForRequest


// SEQ 3
notify UseObjectAddress simatk ESatNotifySetUpEventListPCmd
simatk RunIscTestCase 17 103
waittestclass notify
// Call connected & disconnected not handled by client
simatk CheckProactiveCommand Events 0
simatk SendTerminalResponse

notify UseObjectAddress simatk ESatNotifySetUpEventListPCmd
simatk SyncIscTestCase
waittestclass notify
// Call disconnected not handled by client
simatk CheckProactiveCommand Type 2
simatk SendTerminalResponse
simatk WaitForRequest


// SEQ 4
notify UseObjectAddress simatk ESatNotifySetUpEventListPCmd
simatk RunIscTestCase 17 104
waittestclass notify
// Call connected & disconnected not handled by client
simatk CheckProactiveCommand Events 0
simatk SendTerminalResponse

// Simulate power off by shutting down and reopening the SAT
simatk Close SAT
simatk Close DefaultPhone
simatk Open DefaultPhone
simatk Open SAT
simatk SyncIscTestCase
simatk WaitForRequest


// close all
simatk Close IscControl
simatk Close SAT
simatk Close DefaultPhone
simatk Unload PhoneTsy.tsy
simatk Close RTelServer
delete notify
delete simatk
[Endtest]
